{"name": "persistence.py", "path": "ai_knowledge_manager/persistence.py", "sha": "4bb41fdadaa5df7d217d336bbf085594f2395b29", "size": 11239, "url": "https://api.github.com/repos/yoelcortes/ai-teas/contents/ai_knowledge_manager/persistence.py?ref=main", "html_url": "https://github.com/yoelcortes/ai-teas/blob/main/ai_knowledge_manager/persistence.py", "git_url": "https://api.github.com/repos/yoelcortes/ai-teas/git/blobs/4bb41fdadaa5df7d217d336bbf085594f2395b29", "download_url": "https://raw.githubusercontent.com/yoelcortes/ai-teas/main/ai_knowledge_manager/persistence.py", "type": "file", "content": "aW1wb3J0IGRhdGV0aW1lCmltcG9ydCBnc3ByZWFkCmZyb20gZ29vZ2xlX2F1\ndGhfb2F1dGhsaWIuZmxvdyBpbXBvcnQgSW5zdGFsbGVkQXBwRmxvdwpmcm9t\nIGdvb2dsZS5hdXRoLnRyYW5zcG9ydC5yZXF1ZXN0cyBpbXBvcnQgUmVxdWVz\ndApmcm9tIGdvb2dsZWFwaWNsaWVudC5kaXNjb3ZlcnkgaW1wb3J0IGJ1aWxk\nCmZyb20gZ29vZ2xlYXBpY2xpZW50Lmh0dHAgaW1wb3J0IE1lZGlhRmlsZVVw\nbG9hZApmcm9tIGdzcHJlYWRfZGF0YWZyYW1lIGltcG9ydCBnZXRfYXNfZGF0\nYWZyYW1lLCBzZXRfd2l0aF9kYXRhZnJhbWUKaW1wb3J0IGpzb24KaW1wb3J0\nIG9zCmltcG9ydCBvcy5wYXRoCmltcG9ydCBwaWNrbGUKZnJvbSAucGFwZXIg\naW1wb3J0IFBhcGVyLCBQYXBlclNvdXJjZQoKCmNsYXNzIFBlcnNpc3RlbmNl\nOgogICAgZGVmIHJldHJpZXZlX3BhcGVyX2Zyb21fc3RvcmUoc2VsZiwgaWRl\nbnRpZmllcik6CiAgICAgICAgIiIiUmV0cmlldmUgYSBwYXBlciBmcm9tIHRo\nZSBzdG9yYWdlIGJ5IGl0cyBpZGVudGlmaWVyLgogICAgICAgICAgICBSZXR1\ncm5zIE5vbmUgaWYgdGhlIHBhcGVyIGlzIG5vdCBmb3VuZC4KICAgICAgICAi\nIiIKICAgICAgICByYWlzZSBOb3RJbXBsZW1lbnRlZEVycm9yKCJTdWJjbGFz\ncyBtdXN0IGltcGxlbWVudCBhYnN0cmFjdCBtZXRob2QiKQoKICAgIGRlZiBz\nYXZlX3BhcGVyKHNlbGYsIHBhcGVyKToKICAgICAgICAiIiJTYXZlIGEgcGFw\nZXIgb2JqZWN0IHRvIHRoZSBzdG9yYWdlLiIiIgogICAgICAgIHJhaXNlIE5v\ndEltcGxlbWVudGVkRXJyb3IoIlN1YmNsYXNzIG11c3QgaW1wbGVtZW50IGFi\nc3RyYWN0IG1ldGhvZCIpCgoKIyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj\nIyMjIyMjIyMjIyMKIyBMT0NBTDogSlNPTgoKY2xhc3MgSlNPTlBlcnNpc3Rl\nbmNlKFBlcnNpc3RlbmNlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBjYWNo\nZV9wYXRoOiBzdHIpOgogICAgICAgIHNlbGYuX3BhcGVyX2dyYXBoX3BhdGgg\nPSBjYWNoZV9wYXRoCiAgICAgICAgc2VsZi5fcGFwZXJfZ3JhcGggPSBOb25l\nCiAgICAgICAgc2VsZi5sb2FkX3BhcGVyX2dyYXBoKCkKCiAgICBkZWYgbG9h\nZF9wYXBlcl9ncmFwaChzZWxmKToKICAgICAgICAiIiJMb2FkIHBhcGVyIGdy\nYXBoIGNhY2hlIGZvciBjaGVja2luZyBpZiB3ZSd2ZSBwYXJzZWQgaXQgYWxy\nZWFkeSIiIgogICAgICAgIHByaW50KCJbSlNPTlBlcnNpc3RlbmNlLmxvYWRf\ncGFwZXJfZ3JhcGhdIikKICAgICAgICAjIENyZWF0ZSBHcmFwaCBDYWNoZSBp\nZiBOb25lIEV4aXN0cwogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKHNlbGYu\nX3BhcGVyX2dyYXBoX3BhdGgpID09IEZhbHNlOgogICAgICAgICAgICBwcmlu\ndCgiW0pTT05QZXJzaXN0ZW5jZS5sb2FkX3BhcGVyX2dyYXBoXSBObyBwYXBl\nciBncmFwaCBmaWxlIGZvdW5kLCBjcmVhdGluZyBvbmUiKQogICAgICAgICAg\nICB3aXRoIG9wZW4oc2VsZi5fcGFwZXJfZ3JhcGhfcGF0aCwgJ3cnKSBhcyBm\naWxlOgogICAgICAgICAgICAgICAganNvbi5kdW1wKHt9LCBmaWxlKQogICAg\nICAgICMgTG9hZCBHcmFwaCBDYWNoZQogICAgICAgIHdpdGggb3BlbihzZWxm\nLl9wYXBlcl9ncmFwaF9wYXRoLCAncicpIGFzIGZpbGU6CiAgICAgICAgICAg\nIHNlbGYuX3BhcGVyX2dyYXBoID0ganNvbi5sb2FkKGZpbGUpCgogICAgZGVm\nIHJldHJpZXZlX3BhcGVyX2Zyb21fc3RvcmUoc2VsZiwgaWRlbnRpZmllcik6\nCiAgICAgICAgIyBMb29wIG92ZXIgYWxsIHRoZSBpdGVtcyBpbiB0aGUgZmls\nZSBzZWUgaWYgdGhlcmUncyAKICAgICAgICBmb3Iga2V5LCB2YWx1ZSBpbiBz\nZWxmLl9wYXBlcl9ncmFwaC5pdGVtcygpOgogICAgICAgICAgICAjIHByaW50\nKGYiQ2hlY2tpbmcge3ZhbHVlLmdldCgnZmlsZV9wYXRoJyl9IGFnYWluc3Qg\ne2lkZW50aWZpZXJ9IikKICAgICAgICAgICAgaWYgdmFsdWUuZ2V0KCJzb3Vy\nY2UiKS5nZXQoImxpbmsiKSA9PSBpZGVudGlmaWVyOgogICAgICAgICAgICAg\nICAgcHJpbnQoZiJbSlNPTlBlcnNpc3RlbmNlLnJldHJpZXZlX3BhcGVyX2Zy\nb21fc3RvcmVdIFBhcGVyIGxvYWRlZCBmcm9tIGNhY2hlOiB7dmFsdWUuZ2V0\nKCdzb3VyY2UnKS5nZXQoJ2xpbmsnKX0iKSAKICAgICAgICAgICAgICAgICMg\nQ3JlYXRlIHRoZSBweWRhbnRpYyBjbGFzcyBmcm9tIGRpY3Rpb25hcnkKICAg\nICAgICAgICAgICAgIHJldHVybiBQYXBlcigqKnZhbHVlKQogICAgICAgIHJl\ndHVybiBOb25lCgogICAgZGVmIHNhdmVfcGFwZXIoc2VsZiwgcGFwZXIpOgog\nICAgICAgICIiIlNhdmUgcGFwZXIgZGF0YSB0byBhIEpTT04gZmlsZSBpbiB0\naGUgY2FjaGUgZGlyZWN0b3J5IiIiCiAgICAgICAgcHJpbnQoIltKU09OUGVy\nc2lzdGVuY2Uuc2F2ZV0iKQogICAgICAgICMgQXBwZW5kIHRoaXMgcGFwZXIg\ndG8gZ3JhcGggKGtleSBvbiBET0kpCiAgICAgICAgaWYgbm90IHBhcGVyLmRv\naToKICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiRE9JIGlzIG1pc3Np\nbmcgZm9yIHRoZSBwYXBlciIpCiAgICAgICAgIyBMb2FkIGEgZGljdCBvZiB0\naGUgcGFwZXIgZGF0YQogICAgICAgIHNlbGYuX3BhcGVyX2dyYXBoW3BhcGVy\nLmlkXSA9IHBhcGVyLmdldF9wYXBlcl9kYXRhKCkKICAgICAgICAjIElPOiBV\ncGRhdGUgSlNPTiBncmFwaCBmaWxlCiAgICAgICAgd2l0aCBvcGVuKHNlbGYu\nX3BhcGVyX2dyYXBoX3BhdGgsICd3JykgYXMgZmlsZToKICAgICAgICAgICAg\nanNvbi5kdW1wKHNlbGYuX3BhcGVyX2dyYXBoLCBmaWxlLCBpbmRlbnQ9NCkK\nCgojICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIFJF\nTU9URTogR09PR0xFIERSSVZFCiMgVE9ETzogV09SSyBJTiBQUk9HUkVTUyBp\nbXBsZW1lbnRpb24gdGhlIEdEcml2ZVBlcnNpc3RlbmNlIGNsYXNzIHRvIGZl\nYXR1cmUgcGFyaXR5IHdpdGggSlNPTlBlcnNpc3RlbmNlCgojIGxvZ2luIHRv\nIGdEb2NzCiMgVGhpcyBzaG91bGQgd29yayBwcm92aWRpZ2luIHRoZSB1c2Vy\nIGlzIHJ1bm5pbmcgZnJvbSB0aGUgcm9vdCBkaXJlY3RvcnkgYW5kIHRoZSBm\naWxlIGV4aXN0cwpQQVRIX0NSRURFTlRJQUxTID0gJ2dvb2dsZS1hcHAtY3Jl\nZGVudGlhbHMuanNvbicKIyBSYXcgUGFwZXJzIHJvb3QgZGlyZWN0b3J5OgpS\nT09UX0ZPTERFUl9JRCA9IG9zLmVudmlyb24uZ2V0KCJHT09HTEVfRFJJVkVf\nUk9PVF9GT0xERVJfSUQiKQojRm9yIG1ha2luZyB0aGUgcmV2aWV3IHRlbXBs\nYXRlCkdTSEVFVF9URU1QTEFURV9MSU5LID0gImh0dHBzOi8vZG9jcy5nb29n\nbGUuY29tL3NwcmVhZHNoZWV0cy9kL3t9L2VkaXQiCkdEUklWRV9GSUxFX1ZJ\nRVdfVEVNUExBVEUgPSAiaHR0cHM6Ly9kcml2ZS5nb29nbGUuY29tL2ZpbGUv\nZC97fS92aWV3IgojIFRFTVBMQVRFX0lEID0gb3MuZW52aXJvbi5nZXQoIkdP\nT0dMRV9EUklWRV9URU1QTEFURV9JRCIpCiNGb3IgYWNjZXNpbmcgdGhlIG1h\naW4gY29vcmRpbmF0aW9uIGRvYwpDT09SRElOQVRJT05fRE9DX0lEID0gb3Mu\nZW52aXJvbi5nZXQoIkdPT0dMRV9EUklWRV9DT09SRElOQVRJT05fRE9DX0lE\nIikKQ09PUkRJTkFUSU9OX0RPQ19TVU1NQVJJRVMgPSAnUGFwZXJTdW1tYXJp\nZXMnCkNPT1JESU5BVElPTl9ET0NfQUxMID0gJ1RvdGFsTGlicmFyeScKU0NP\nUEVTID0gWydodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3NwcmVh\nZHNoZWV0cycsICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL2Ry\naXZlJ10KIyBSRVZJRVdFUl9URU1QTEFURV9DRUxMU19UT19DSEVDSyA9IG9z\nLmVudmlyb24uZ2V0KCJHT09HTEVfRFJJVkVfUkVWSUVXRVJfVEVNUExBVEVf\nQ0VMTFNfVE9fQ0hFQ0siKQoKY2xhc3MgR0RyaXZlUGVyc2lzdGVuY2UoUGVy\nc2lzdGVuY2UpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgICMg\nSW5pdGlhbGl6ZSBHb29nbGUgRHJpdmUgY29ubmVjdGlvbiBoZXJlCiAgICAg\nICAgIyBDb25uZWN0IHRvIHRoZSBHb29nbGUgU2hlZXRzIGFuZCBEcml2ZSBB\nUElzCiAgICAgICAgc2VsZi5jcmVkcyA9IHNlbGYuZ2V0X2NyZWRzKCkKICAg\nICAgICBzZWxmLnNlcnZpY2VfZHJpdmUgPSBidWlsZCgnZHJpdmUnLCAndjMn\nLCBjcmVkZW50aWFscz1zZWxmLmNyZWRzKQogICAgICAgIHNlbGYuc2Vydmlj\nZV9zaGVldHMgPSBidWlsZCgnc2hlZXRzJywgJ3Y0JywgY3JlZGVudGlhbHM9\nc2VsZi5jcmVkcykKICAgICAgICAjTG9hZCB0aGUgY29vcmRpbmF0aW9uIGRv\nYwogICAgICAgIGNsaWVudCA9IGdzcHJlYWQuYXV0aG9yaXplKHNlbGYuY3Jl\nZHMpCiAgICAgICAgc2VsZi5zcHJlYWRzaGVldF9tYXN0ZXIgPSBjbGllbnQu\nb3Blbl9ieV9rZXkoQ09PUkRJTkFUSU9OX0RPQ19JRCkKICAgICAgICBzZWxm\nLnByb2Nlc3NlZF93b3Jrc2hlZXQgPSBzZWxmLnNwcmVhZHNoZWV0X21hc3Rl\nci53b3Jrc2hlZXQoQ09PUkRJTkFUSU9OX0RPQ19TVU1NQVJJRVMpCiAgICAg\nICAgc2VsZi50b3RhbF9wYXBlcnNfc2hlZXQgPSBzZWxmLnNwcmVhZHNoZWV0\nX21hc3Rlci53b3Jrc2hlZXQoQ09PUkRJTkFUSU9OX0RPQ19BTEwpCiAgICAg\nICAgc2VsZi5saWJyYXJ5X2RmID0gZ2V0X2FzX2RhdGFmcmFtZShzZWxmLnBy\nb2Nlc3NlZF93b3Jrc2hlZXQsIGV2YWx1YXRlX2Zvcm11bGFzPVRydWUsKQog\nICAgICAgICMgQXNzdW1pbmcgdGhlIHNlY29uZCByb3cgaXMgeW91ciBkZXNp\ncmVkIGhlYWRlciBhbmQgeW91IHdhbnQgdG8gc2tpcCB0aGUgZmlyc3Qgcm93\nCiAgICAgICAgIyBSZXNldCB0aGUgaGVhZGVyCiAgICAgICAgbmV3X2hlYWRl\nciA9IHNlbGYubGlicmFyeV9kZi5pbG9jWzBdICAjIFRha2UgdGhlIHNlY29u\nZCByb3cgZm9yIHRoZSBoZWFkZXIKICAgICAgICBzZWxmLmxpYnJhcnlfZGYg\nPSBzZWxmLmxpYnJhcnlfZGZbMTpdICAjIFRha2UgdGhlIGRhdGEgbGVzcyB0\naGUgaGVhZGVyIHJvdwogICAgICAgIHNlbGYubGlicmFyeV9kZi5jb2x1bW5z\nID0gbmV3X2hlYWRlciAgIyBTZXQgdGhlIGhlYWRlciByb3cgYXMgdGhlIGRm\nIGhlYWRlcgogICAgICAgIHNlbGYubGlicmFyeV9kZi5yZXNldF9pbmRleChk\ncm9wPVRydWUsIGlucGxhY2U9VHJ1ZSkKICAgICAgICBzZWxmLmxpYnJhcnlf\nZGYgPSBzZWxmLmxpYnJhcnlfZGYuc2V0X2luZGV4KCdpZCcpCiAgICAgICAg\nI3NldF93aXRoX2RhdGFmcmFtZShzZWxmLnByb2Nlc3NlZF93b3Jrc2hlZXQs\nIHNlbGYubGlicmFyeV9kZikKICAgICAgICBzZXRfd2l0aF9kYXRhZnJhbWUo\nc2VsZi5wcm9jZXNzZWRfd29ya3NoZWV0LCBzZWxmLmxpYnJhcnlfZGYsIHJv\ndz0yLCBjb2w9MSwgaW5jbHVkZV9pbmRleD1UcnVlLCBpbmNsdWRlX2NvbHVt\nbl9oZWFkZXI9VHJ1ZSkKICAgICAgICBzZWxmLnRvdGFsX2xpYnJhcnlfZGYg\nPSBnZXRfYXNfZGF0YWZyYW1lKHNlbGYudG90YWxfcGFwZXJzX3NoZWV0LCBl\ndmFsdWF0ZV9mb3JtdWxhcz1UcnVlKQogICAgICAgIHNlbGYudG90YWxfbGli\ncmFyeV9kZiA9IHNlbGYudG90YWxfbGlicmFyeV9kZi5zZXRfaW5kZXgoJ2lk\nJykKCiAgICBkZWYgZ2V0X2NyZWRzKHNlbGYpOgogICAgICAgICIiIgogICAg\nICAgIFJldHJpZXZlcyB0aGUgdXNlcidzIGNyZWRlbnRpYWxzIGZvciBhY2Nl\nc3NpbmcgdGhlIEhvbWV3b3JsZCBBUEkuCiAgICAgICAgSWYgdGhlIHVzZXIn\ncyBjcmVkZW50aWFscyBhcmUgc3RvcmVkIGluIGEgJ3Rva2VuLnBpY2tsZScg\nZmlsZSwgdGhpcyBmdW5jdGlvbgogICAgICAgIHdpbGwgYXR0ZW1wdCB0byBs\nb2FkIHRoZW0gZnJvbSB0aGF0IGZpbGUuIElmIHRoZSBjcmVkZW50aWFscyBh\ncmUgbm90IGZvdW5kCiAgICAgICAgb3IgYXJlIGludmFsaWQsIHRoZSB1c2Vy\nIHdpbGwgYmUgcHJvbXB0ZWQgdG8gYXV0aGVudGljYXRlIHZpYSB0aGUgSG9t\nZXdvcmxkCiAgICAgICAgQVBJIGFuZCB0aGUgbmV3IGNyZWRlbnRpYWxzIHdp\nbGwgYmUgc2F2ZWQgdG8gdGhlICd0b2tlbi5waWNrbGUnIGZpbGUuCiAgICAg\nICAgUmV0dXJuczoKICAgICAgICAgICAgQ3JlZGVudGlhbHM6IFRoZSB1c2Vy\nJ3MgY3JlZGVudGlhbHMgZm9yIGFjY2Vzc2luZyB0aGUgSG9tZXdvcmxkIEFQ\nSS4KICAgICAgICAiIiIKICAgICAgICBjcmVkcyA9IE5vbmUKICAgICAgICBp\nZiBvcy5wYXRoLmV4aXN0cygndG9rZW4ucGlja2xlJyk6CiAgICAgICAgICAg\nIHdpdGggb3BlbigndG9rZW4ucGlja2xlJywgJ3JiJykgYXMgdG9rZW46CiAg\nICAgICAgICAgICAgICBjcmVkcyA9IHBpY2tsZS5sb2FkKHRva2VuKQogICAg\nICAgIGlmIG5vdCBjcmVkcyBvciBub3QgY3JlZHMudmFsaWQ6CiAgICAgICAg\nICAgIGlmIGNyZWRzIGFuZCBjcmVkcy5leHBpcmVkIGFuZCBjcmVkcy5yZWZy\nZXNoX3Rva2VuOgogICAgICAgICAgICAgICAgY3JlZHMucmVmcmVzaChSZXF1\nZXN0KCkpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBmbG93\nID0gSW5zdGFsbGVkQXBwRmxvdy5mcm9tX2NsaWVudF9zZWNyZXRzX2ZpbGUo\nCiAgICAgICAgICAgICAgICAgICAgUEFUSF9DUkVERU5USUFMUywgU0NPUEVT\nKQogICAgICAgICAgICAgICAgY3JlZHMgPSBmbG93LnJ1bl9sb2NhbF9zZXJ2\nZXIocG9ydD0wKQogICAgICAgICAgICB3aXRoIG9wZW4oJ3Rva2VuLnBpY2ts\nZScsICd3YicpIGFzIHRva2VuOgogICAgICAgICAgICAgICAgcGlja2xlLmR1\nbXAoY3JlZHMsIHRva2VuKQogICAgICAgIHJldHVybiBjcmVkcwoKICAgIGRl\nZiByZXRyaWV2ZV9wYXBlcl9mcm9tX3N0b3JlKHNlbGYsIHBhcGVyX2lkKToK\nICAgICAgICAiIiIKICAgICAgICBTZWFyY2ggZm9yIGEgcGFwZXIgaW4gdGhl\nIEdEcml2ZSBTdG9yZS4gaWYgaXQgZXhpc3RzLCByZXR1cm4gaXQsIGlmIG5v\ndCwgcmV0dXJuIE5vbmUKICAgICAgICAiIiIKICAgICAgICAjIENoZWNrIGlm\nIHRoZSBwYXBlciBpcyBpbiB0aGUgbGlicmFyeQogICAgICAgICMgY2VsbCA9\nIHNlbGYudG90YWxfcGFwZXJzX3NoZWV0LmZpbmQoZiJ7cGFwZXIuaWR9IikK\nICAgICAgICBpZiBwYXBlcl9pZCBpbiBzZWxmLnRvdGFsX2xpYnJhcnlfZGYu\naW5kZXg6CiAgICAgICAgICAgICMgSWYgdGhlIElEIGV4aXN0cywgcmV0dXJu\nIHRoZSByb3cgYXMgYSBQYXBlciBvYmplY3QKICAgICAgICAgICAgcGFwZXJf\nZnJvbV9zdG9yZSA9IHNlbGYudG90YWxfbGlicmFyeV9kZi5sb2NbcGFwZXJf\naWRdLnRvX2RpY3QoKQogICAgICAgICAgICBwYXBlcl9mcm9tX3N0b3JlWydz\nZWN0aW9ucyddID0gW10gIyAKICAgICAgICAgICAgcGFwZXJfZnJvbV9zdG9y\nZVsnc291cmNlJ10gPSBQYXBlclNvdXJjZShsaW5rPXBhcGVyX2Zyb21fc3Rv\ncmVbJ2ZpbGVfcGF0aCddLCBsaW5rdHlwZT0icGRmIikKICAgICAgICAgICAg\nZm9yIGtleSwgdmFsdWUgaW4gcGFwZXJfZnJvbV9zdG9yZS5pdGVtcygpOgog\nICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIHBhcGVy\nX2Zyb21fc3RvcmVba2V5XSA9IGpzb24ubG9hZHModmFsdWUpICAjIENvbnZl\ncnQgZnJvbSBhIEpTT04gc3RyaW5nCiAgICAgICAgICAgICAgICBleGNlcHQ6\nCiAgICAgICAgICAgICAgICAgICAgIyBwcmludChmIkNvdWxkIG5vdCBjb252\nZXJ0IHtrZXl9IHRvIEpTT04sIHZhbHVlOiB7dmFsdWV9IikKICAgICAgICAg\nICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIHJldHVybiBQYXBlcigqKnBh\ncGVyX2Zyb21fc3RvcmUgKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJl\ndHVybiBOb25lCgogICAgZGVmIHNhdmVfcGFwZXJfdGV4dChzZWxmLCBwYXBl\ncjpQYXBlcik6CiAgICAgICAgIiIiCiAgICAgICAgU2F2ZSBhIHBhcGVyIHRv\nIHRoZSBHRHJpdmUgc3RvcmUKICAgICAgICAiIiIgIAogICAgICAgIHVybF90\nZXh0X2ZpbGUgPSBOb25lCiAgICAgICAgdXJsX3BkZl9maWxlID0gTm9uZQog\nICAgICAgICMgQXNzdW1lIHBhcGVyLmZ1bGx0ZXh0KCkgZ2l2ZXMgeW91IHRo\nZSB0ZXh0IGNvbnRlbnQKICAgICAgICBwYXBlcl90ZXh0ID0gcGFwZXIuZnVs\nbHRleHQoKQogICAgICAgICMgR2V0IHRoZSBjdXJyZW50IGRhdGUgaW4gWVlZ\nWU1NREQgZm9ybWF0CiAgICAgICAgY3VycmVudF9kYXRlID0gZGF0ZXRpbWUu\nZGF0ZXRpbWUubm93KCkuc3RyZnRpbWUoJyVZJW0lZCcpCiAgICAgICAgIyBN\nb2RpZmllZCB0ZW1wb3JhcnkgZmlsZSBwYXRoIHdpdGggdGhlIGN1cnJlbnQg\nZGF0ZQogICAgICAgICMgZ2V0IGp1c3QgdGhlIGZpbGVuYW1lIGZyb20gdGhl\nIGZ1bGwgcGF0aCAKICAgICAgICBsb2NhbF9maWxlbmFtZSA9IG9zLnBhdGgu\nYmFzZW5hbWUocGFwZXIuc291cmNlLmxpbmspCiAgICAgICAgdGVtcF9maWxl\nX3BhdGggPSBmIntsb2NhbF9maWxlbmFtZX1fZXh0cmFjdGVkX3tjdXJyZW50\nX2RhdGV9LnR4dCIKICAgICAgICAjIFNhdmUgdGV4dCB0byBhIHRlbXBvcmFy\neSBmaWxlCiAgICAgICAgd2l0aCBvcGVuKHRlbXBfZmlsZV9wYXRoLCAndycs\nIGVuY29kaW5nPSd1dGYtOCcsIGVycm9ycz0ncmVwbGFjZScpIGFzIHRlbXBf\nZmlsZToKICAgICAgICAgICAgdGVtcF9maWxlLndyaXRlKHBhcGVyX3RleHQp\nCiAgICAgICAgIyBDcmVhdGUgZmlsZSBtZXRhZGF0YQogICAgICAgIGZpbGVf\nbWV0YWRhdGEgPSB7CiAgICAgICAgICAgICduYW1lJzogdGVtcF9maWxlX3Bh\ndGgsCiAgICAgICAgICAgICdwYXJlbnRzJzogW1JPT1RfRk9MREVSX0lEXQog\nICAgICAgIH0KICAgICAgICAjIFVwbG9hZCB0aGUgZmlsZQogICAgICAgIG1l\nZGlhID0gTWVkaWFGaWxlVXBsb2FkKHRlbXBfZmlsZV9wYXRoLCBtaW1ldHlw\nZT0ndGV4dC9wbGFpbicpCiAgICAgICAgdGV4dF9maWxlID0gc2VsZi5zZXJ2\naWNlX2RyaXZlLmZpbGVzKCkuY3JlYXRlKGJvZHk9ZmlsZV9tZXRhZGF0YSwg\nbWVkaWFfYm9keT1tZWRpYSwgZmllbGRzPSdpZCcpLmV4ZWN1dGUoKQogICAg\nICAgIHVybF90ZXh0X2ZpbGUgPSBHRFJJVkVfRklMRV9WSUVXX1RFTVBMQVRF\nLmZvcm1hdCh0ZXh0X2ZpbGUuZ2V0KCdpZCcpKQogICAgICAgIG9zLnJlbW92\nZSh0ZW1wX2ZpbGVfcGF0aCkgICMgRGVsZXRlIHRoZSB0ZW1wb3JhcnkgZmls\nZQogICAgICAgIGlmIHBhcGVyLnNvdXJjZS5saW5rdHlwZSA9PSAicGRmIjoK\nICAgICAgICAgICAgcGRmX2ZpbGVfcGF0aCA9IHBhcGVyLnNvdXJjZS5saW5r\nCiAgICAgICAgICAgICMgQ3JlYXRlIGZpbGUgbWV0YWRhdGEgZm9yIHRoZSBQ\nREYKICAgICAgICAgICAgcGRmX2ZpbGVfbWV0YWRhdGEgPSB7CiAgICAgICAg\nICAgICAgICAnbmFtZSc6IG9zLnBhdGguYmFzZW5hbWUocGRmX2ZpbGVfcGF0\naCksCiAgICAgICAgICAgICAgICAncGFyZW50cyc6IFtST09UX0ZPTERFUl9J\nRF0KICAgICAgICAgICAgfQogICAgICAgICAgICAjIFVwbG9hZCB0aGUgUERG\nIGZpbGUKICAgICAgICAgICAgbWVkaWFfcGRmID0gTWVkaWFGaWxlVXBsb2Fk\nKHBkZl9maWxlX3BhdGgsIG1pbWV0eXBlPSdhcHBsaWNhdGlvbi9wZGYnKQog\nICAgICAgICAgICBwZGZfZmlsZSA9IHNlbGYuc2VydmljZV9kcml2ZS5maWxl\ncygpLmNyZWF0ZShib2R5PXBkZl9maWxlX21ldGFkYXRhLCBtZWRpYV9ib2R5\nPW1lZGlhX3BkZiwgZmllbGRzPSdpZCcpLmV4ZWN1dGUoKQogICAgICAgICAg\nICAjIFByaW50IHRoZSBQREYgZmlsZSBJRAogICAgICAgICAgICB1cmxfcGRm\nX2ZpbGUgPSBHRFJJVkVfRklMRV9WSUVXX1RFTVBMQVRFLmZvcm1hdChwZGZf\nZmlsZS5nZXQoJ2lkJykpCiAgICAgICAgIyBPcHRpb25hbGx5LCBkZWxldGUg\ndGhlIHRlbXBvcmFyeSBmaWxlCiAgICAgICAgcmV0dXJuIHVybF90ZXh0X2Zp\nbGUsIHVybF9wZGZfZmlsZQoKICAgIGRlZiBzYXZlX3BhcGVyKHNlbGYsIHBh\ncGVyOlBhcGVyKToKICAgICAgICAiIiIKICAgICAgICBTYXZlIGEgcGFwZXIg\ndG8gdGhlIEdEcml2ZSBzdG9yZQogICAgICAgICIiIiAgCiAgICAgICAgcHJp\nbnQoJ1tnRHJpdmVQZXJzaXN0ZW5jZS5zYXZlX3BhcGVyXScpCiAgICAgICAg\ncGFwZXJfZGF0YSA9IHBhcGVyLmdldF9wYXBlcl9kYXRhKCkKICAgICAgICBw\nYXBlcl9kYXRhWydzZWN0aW9ucyddID0gW10gI1RlbXBvcmFyeSBoYWNrIAog\nICAgICAgICMgVGhlIGRhdGEgbmVlZHMgdG8gYmUgbW9kaWZpZWQgdG8gZml0\nIHRoZSBkYXRhZnJhbWUKICAgICAgICAjIExvb3Agb3ZlciBwYXBlcl9kYXRh\nIGl0ZW1zIGFuZCBmbGF0dGVuIHNlcXVlbmNlcyBvciBjb21wbGV4IHN0cnVj\ndHVyZXMgdG8gSlNPTiBzdHJpbmdzCiAgICAgICAgZm9yIGtleSwgdmFsdWUg\naW4gcGFwZXJfZGF0YS5pdGVtcygpOgogICAgICAgICAgICBpZiBpc2luc3Rh\nbmNlKHZhbHVlLCAobGlzdCwgZGljdCkpOiAgIyBDaGVjayBpZiB0aGUgdmFs\ndWUgaXMgYSBsaXN0IG9yIGRpY3Rpb25hcnkKICAgICAgICAgICAgICAgIHBh\ncGVyX2RhdGFba2V5XSA9IGpzb24uZHVtcHModmFsdWUpICAjIENvbnZlcnQg\ndG8gYSBKU09OIHN0cmluZwogICAgICAgICNBIHBhcGVyIHRoYXQgaGFzIGJl\nZW4gcHJvY2Vzc2VkIGFuZCBzYXZlZCB0byB0aGUgbGlicmFyeSB3aWxsIGFs\ncmVhZHkgaGF2ZSB1cGxvYWRlZCBsaW5rcwogICAgICAgIGlmIG5vdCBwYXBl\nci5leHRyYWN0ZWRfdGV4dDogCiAgICAgICAgICAgIHVybF90ZXh0X2ZpbGUs\nIHVybF9wZGZfZmlsZSA9IHNlbGYuc2F2ZV9wYXBlcl90ZXh0KHBhcGVyKQog\nICAgICAgICAgICAjIEFkZCB0aGUgVVJMIHRvIHRoZSB0ZXh0IGZpbGUgYW5k\nIHRoZSBQREYgZmlsZSB0byB0aGUgcGFwZXIgZGF0YQogICAgICAgICAgICBw\nYXBlcl9kYXRhWydleHRyYWN0ZWRfdGV4dCddID0gdXJsX3RleHRfZmlsZQog\nICAgICAgICAgICBwYXBlcl9kYXRhWydmaWxlX3BhdGgnXSA9IHVybF9wZGZf\nZmlsZQogICAgICAgICMgU2F2ZSB0aGUgcGFwZXIgdG8gdGhlIHByb2Nlc3Nl\nZCB3b3Jrc2hlZXQsIAogICAgICAgICMgJ2lkJyBpcyB0aGUga2V5LCBzbyB0\naGUgZGljdGlvbmFyeSBjb21wcmVoZW5zaW9uIGxpbmUgaXMganVzdCB0byBh\ndm9pZCAKICAgICAgICAjIGRvdWJsZS1zYXZpbmcgdGhlIGlkIHZhbHVlCiAg\nICAgICAgIyBOb3RlOiBCeSBpbmRleGluZyBvbiBpZCwgd2UgY2FuIHVwZGF0\nZSB0aGUgcm93IGlmIGl0IGV4aXN0cywgb3IgYWRkIGEgbmV3IHJvdyBpZiBp\ndCBkb2Vzbid0CiAgICAgICAgc2VsZi50b3RhbF9saWJyYXJ5X2RmLmxvY1tw\nYXBlcl9kYXRhWydpZCddXSA9IFwKICAgICAgICAgICAge2s6IHYgZm9yIGss\nIHYgaW4gcGFwZXJfZGF0YS5pdGVtcygpIGlmIGsgIT0gJ2lkJ30KICAgICAg\nICBwcmludChmIlRvdGFsIHNpemUgb2YgdG90YWxfbGlicmFyeV9kZjoge3Nl\nbGYudG90YWxfbGlicmFyeV9kZi5zaGFwZX0iKQogICAgICAgIHNldF93aXRo\nX2RhdGFmcmFtZShzZWxmLnRvdGFsX3BhcGVyc19zaGVldCwgc2VsZi50b3Rh\nbF9saWJyYXJ5X2RmLGluY2x1ZGVfaW5kZXg9VHJ1ZSkKCg==\n", "encoding": "base64", "_links": {"self": "https://api.github.com/repos/yoelcortes/ai-teas/contents/ai_knowledge_manager/persistence.py?ref=main", "git": "https://api.github.com/repos/yoelcortes/ai-teas/git/blobs/4bb41fdadaa5df7d217d336bbf085594f2395b29", "html": "https://github.com/yoelcortes/ai-teas/blob/main/ai_knowledge_manager/persistence.py"}}