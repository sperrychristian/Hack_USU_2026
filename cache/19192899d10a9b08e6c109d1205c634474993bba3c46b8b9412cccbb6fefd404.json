{"name": "index.js", "path": "index.js", "sha": "cbc53018b107541a23bcbe090524486a824506cb", "size": 13913, "url": "https://api.github.com/repos/sindresorhus/emittery/contents/index.js?ref=main", "html_url": "https://github.com/sindresorhus/emittery/blob/main/index.js", "git_url": "https://api.github.com/repos/sindresorhus/emittery/git/blobs/cbc53018b107541a23bcbe090524486a824506cb", "download_url": "https://raw.githubusercontent.com/sindresorhus/emittery/main/index.js", "type": "file", "content": "aW1wb3J0IHthbnlNYXAsIHByb2R1Y2Vyc01hcCwgZXZlbnRzTWFwfSBmcm9t\nICcuL21hcHMuanMnOwoKY29uc3QgYW55UHJvZHVjZXIgPSBTeW1ib2woJ2Fu\neVByb2R1Y2VyJyk7CmNvbnN0IHJlc29sdmVkUHJvbWlzZSA9IFByb21pc2Uu\ncmVzb2x2ZSgpOwoKLy8gRGVmaW5lIHN5bWJvbHMgZm9yICJtZXRhIiBldmVu\ndHMuCmNvbnN0IGxpc3RlbmVyQWRkZWQgPSBTeW1ib2woJ2xpc3RlbmVyQWRk\nZWQnKTsKY29uc3QgbGlzdGVuZXJSZW1vdmVkID0gU3ltYm9sKCdsaXN0ZW5l\nclJlbW92ZWQnKTsKCmxldCBjYW5FbWl0TWV0YUV2ZW50cyA9IGZhbHNlOwps\nZXQgaXNHbG9iYWxEZWJ1Z0VuYWJsZWQgPSBmYWxzZTsKCmNvbnN0IGlzRXZl\nbnRLZXlUeXBlID0ga2V5ID0+IHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnIHx8\nIHR5cGVvZiBrZXkgPT09ICdzeW1ib2wnIHx8IHR5cGVvZiBrZXkgPT09ICdu\ndW1iZXInOwoKZnVuY3Rpb24gYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSkg\newoJaWYgKCFpc0V2ZW50S2V5VHlwZShldmVudE5hbWUpKSB7CgkJdGhyb3cg\nbmV3IFR5cGVFcnJvcignYGV2ZW50TmFtZWAgbXVzdCBiZSBhIHN0cmluZywg\nc3ltYm9sLCBvciBudW1iZXInKTsKCX0KfQoKZnVuY3Rpb24gYXNzZXJ0TGlz\ndGVuZXIobGlzdGVuZXIpIHsKCWlmICh0eXBlb2YgbGlzdGVuZXIgIT09ICdm\ndW5jdGlvbicpIHsKCQl0aHJvdyBuZXcgVHlwZUVycm9yKCdsaXN0ZW5lciBt\ndXN0IGJlIGEgZnVuY3Rpb24nKTsKCX0KfQoKZnVuY3Rpb24gZ2V0TGlzdGVu\nZXJzKGluc3RhbmNlLCBldmVudE5hbWUpIHsKCWNvbnN0IGV2ZW50cyA9IGV2\nZW50c01hcC5nZXQoaW5zdGFuY2UpOwoJaWYgKCFldmVudHMuaGFzKGV2ZW50\nTmFtZSkpIHsKCQlyZXR1cm47Cgl9CgoJcmV0dXJuIGV2ZW50cy5nZXQoZXZl\nbnROYW1lKTsKfQoKZnVuY3Rpb24gZ2V0RXZlbnRQcm9kdWNlcnMoaW5zdGFu\nY2UsIGV2ZW50TmFtZSkgewoJY29uc3Qga2V5ID0gaXNFdmVudEtleVR5cGUo\nZXZlbnROYW1lKSA/IGV2ZW50TmFtZSA6IGFueVByb2R1Y2VyOwoJY29uc3Qg\ncHJvZHVjZXJzID0gcHJvZHVjZXJzTWFwLmdldChpbnN0YW5jZSk7CglpZiAo\nIXByb2R1Y2Vycy5oYXMoa2V5KSkgewoJCXJldHVybjsKCX0KCglyZXR1cm4g\ncHJvZHVjZXJzLmdldChrZXkpOwp9CgpmdW5jdGlvbiBlbnF1ZXVlUHJvZHVj\nZXJzKGluc3RhbmNlLCBldmVudE5hbWUsIGV2ZW50RGF0YSkgewoJY29uc3Qg\ncHJvZHVjZXJzID0gcHJvZHVjZXJzTWFwLmdldChpbnN0YW5jZSk7CglpZiAo\ncHJvZHVjZXJzLmhhcyhldmVudE5hbWUpKSB7CgkJZm9yIChjb25zdCBwcm9k\ndWNlciBvZiBwcm9kdWNlcnMuZ2V0KGV2ZW50TmFtZSkpIHsKCQkJcHJvZHVj\nZXIuZW5xdWV1ZShldmVudERhdGEpOwoJCX0KCX0KCglpZiAocHJvZHVjZXJz\nLmhhcyhhbnlQcm9kdWNlcikpIHsKCQljb25zdCBpdGVtID0gUHJvbWlzZS5h\nbGwoW2V2ZW50TmFtZSwgZXZlbnREYXRhXSk7CgkJZm9yIChjb25zdCBwcm9k\ndWNlciBvZiBwcm9kdWNlcnMuZ2V0KGFueVByb2R1Y2VyKSkgewoJCQlwcm9k\ndWNlci5lbnF1ZXVlKGl0ZW0pOwoJCX0KCX0KfQoKZnVuY3Rpb24gaXRlcmF0\nb3IoaW5zdGFuY2UsIGV2ZW50TmFtZXMpIHsKCWV2ZW50TmFtZXMgPSBBcnJh\neS5pc0FycmF5KGV2ZW50TmFtZXMpID8gZXZlbnROYW1lcyA6IFtldmVudE5h\nbWVzXTsKCglsZXQgaXNGaW5pc2hlZCA9IGZhbHNlOwoJbGV0IGZsdXNoID0g\nKCkgPT4ge307CglsZXQgcXVldWUgPSBbXTsKCgljb25zdCBwcm9kdWNlciA9\nIHsKCQllbnF1ZXVlKGl0ZW0pIHsKCQkJcXVldWUucHVzaChpdGVtKTsKCQkJ\nZmx1c2goKTsKCQl9LAoJCWZpbmlzaCgpIHsKCQkJaXNGaW5pc2hlZCA9IHRy\ndWU7CgkJCWZsdXNoKCk7CgkJfSwKCX07CgoJZm9yIChjb25zdCBldmVudE5h\nbWUgb2YgZXZlbnROYW1lcykgewoJCWxldCBzZXQgPSBnZXRFdmVudFByb2R1\nY2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKCQlpZiAoIXNldCkgewoJCQlz\nZXQgPSBuZXcgU2V0KCk7CgkJCWNvbnN0IHByb2R1Y2VycyA9IHByb2R1Y2Vy\nc01hcC5nZXQoaW5zdGFuY2UpOwoJCQlwcm9kdWNlcnMuc2V0KGV2ZW50TmFt\nZSwgc2V0KTsKCQl9CgoJCXNldC5hZGQocHJvZHVjZXIpOwoJfQoKCXJldHVy\nbiB7CgkJYXN5bmMgbmV4dCgpIHsKCQkJaWYgKCFxdWV1ZSkgewoJCQkJcmV0\ndXJuIHtkb25lOiB0cnVlfTsKCQkJfQoKCQkJaWYgKHF1ZXVlLmxlbmd0aCA9\nPT0gMCkgewoJCQkJaWYgKGlzRmluaXNoZWQpIHsKCQkJCQlxdWV1ZSA9IHVu\nZGVmaW5lZDsKCQkJCQlyZXR1cm4gdGhpcy5uZXh0KCk7CgkJCQl9CgoJCQkJ\nYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CgkJCQkJZmx1c2ggPSBy\nZXNvbHZlOwoJCQkJfSk7CgoJCQkJcmV0dXJuIHRoaXMubmV4dCgpOwoJCQl9\nCgoJCQlyZXR1cm4gewoJCQkJZG9uZTogZmFsc2UsCgkJCQl2YWx1ZTogYXdh\naXQgcXVldWUuc2hpZnQoKSwKCQkJfTsKCQl9LAoKCQlhc3luYyByZXR1cm4o\ndmFsdWUpIHsKCQkJcXVldWUgPSB1bmRlZmluZWQ7CgoJCQlmb3IgKGNvbnN0\nIGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CgkJCQljb25zdCBzZXQgPSBn\nZXRFdmVudFByb2R1Y2VycyhpbnN0YW5jZSwgZXZlbnROYW1lKTsKCQkJCWlm\nIChzZXQpIHsKCQkJCQlzZXQuZGVsZXRlKHByb2R1Y2VyKTsKCQkJCQlpZiAo\nc2V0LnNpemUgPT09IDApIHsKCQkJCQkJY29uc3QgcHJvZHVjZXJzID0gcHJv\nZHVjZXJzTWFwLmdldChpbnN0YW5jZSk7CgkJCQkJCXByb2R1Y2Vycy5kZWxl\ndGUoZXZlbnROYW1lKTsKCQkJCQl9CgkJCQl9CgkJCX0KCgkJCWZsdXNoKCk7\nCgoJCQlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAKCQkJCT8ge2RvbmU6\nIHRydWUsIHZhbHVlOiBhd2FpdCB2YWx1ZX0KCQkJCToge2RvbmU6IHRydWV9\nOwoJCX0sCgoJCVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7CgkJCXJldHVy\nbiB0aGlzOwoJCX0sCgl9Owp9CgpmdW5jdGlvbiBkZWZhdWx0TWV0aG9kTmFt\nZXNPckFzc2VydChtZXRob2ROYW1lcykgewoJaWYgKG1ldGhvZE5hbWVzID09\nPSB1bmRlZmluZWQpIHsKCQlyZXR1cm4gYWxsRW1pdHRlcnlNZXRob2RzOwoJ\nfQoKCWlmICghQXJyYXkuaXNBcnJheShtZXRob2ROYW1lcykpIHsKCQl0aHJv\ndyBuZXcgVHlwZUVycm9yKCdgbWV0aG9kTmFtZXNgIG11c3QgYmUgYW4gYXJy\nYXkgb2Ygc3RyaW5ncycpOwoJfQoKCWZvciAoY29uc3QgbWV0aG9kTmFtZSBv\nZiBtZXRob2ROYW1lcykgewoJCWlmICghYWxsRW1pdHRlcnlNZXRob2RzLmlu\nY2x1ZGVzKG1ldGhvZE5hbWUpKSB7CgkJCWlmICh0eXBlb2YgbWV0aG9kTmFt\nZSAhPT0gJ3N0cmluZycpIHsKCQkJCXRocm93IG5ldyBUeXBlRXJyb3IoJ2Bt\nZXRob2ROYW1lc2AgZWxlbWVudCBtdXN0IGJlIGEgc3RyaW5nJyk7CgkJCX0K\nCgkJCXRocm93IG5ldyBFcnJvcihgJHttZXRob2ROYW1lfSBpcyBub3QgRW1p\ndHRlcnkgbWV0aG9kYCk7CgkJfQoJfQoKCXJldHVybiBtZXRob2ROYW1lczsK\nfQoKY29uc3QgaXNNZXRhRXZlbnQgPSBldmVudE5hbWUgPT4gZXZlbnROYW1l\nID09PSBsaXN0ZW5lckFkZGVkIHx8IGV2ZW50TmFtZSA9PT0gbGlzdGVuZXJS\nZW1vdmVkOwoKZnVuY3Rpb24gZW1pdE1ldGFFdmVudChlbWl0dGVyLCBldmVu\ndE5hbWUsIGV2ZW50RGF0YSkgewoJaWYgKCFpc01ldGFFdmVudChldmVudE5h\nbWUpKSB7CgkJcmV0dXJuOwoJfQoKCXRyeSB7CgkJY2FuRW1pdE1ldGFFdmVu\ndHMgPSB0cnVlOwoJCWVtaXR0ZXIuZW1pdChldmVudE5hbWUsIGV2ZW50RGF0\nYSk7Cgl9IGZpbmFsbHkgewoJCWNhbkVtaXRNZXRhRXZlbnRzID0gZmFsc2U7\nCgl9Cn0KCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtaXR0ZXJ5IHsKCXN0YXRp\nYyBtaXhpbihlbWl0dGVyeVByb3BlcnR5TmFtZSwgbWV0aG9kTmFtZXMpIHsK\nCQltZXRob2ROYW1lcyA9IGRlZmF1bHRNZXRob2ROYW1lc09yQXNzZXJ0KG1l\ndGhvZE5hbWVzKTsKCQlyZXR1cm4gdGFyZ2V0ID0+IHsKCQkJaWYgKHR5cGVv\nZiB0YXJnZXQgIT09ICdmdW5jdGlvbicpIHsKCQkJCXRocm93IG5ldyBUeXBl\nRXJyb3IoJ2B0YXJnZXRgIG11c3QgYmUgZnVuY3Rpb24nKTsKCQkJfQoKCQkJ\nZm9yIChjb25zdCBtZXRob2ROYW1lIG9mIG1ldGhvZE5hbWVzKSB7CgkJCQlp\nZiAodGFyZ2V0LnByb3RvdHlwZVttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVk\nKSB7CgkJCQkJdGhyb3cgbmV3IEVycm9yKGBUaGUgcHJvcGVydHkgXGAke21l\ndGhvZE5hbWV9XGAgYWxyZWFkeSBleGlzdHMgb24gXGB0YXJnZXRcYGApOwoJ\nCQkJfQoJCQl9CgoJCQlmdW5jdGlvbiBnZXRFbWl0dGVyeVByb3BlcnR5KCkg\newoJCQkJT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGVtaXR0ZXJ5UHJv\ncGVydHlOYW1lLCB7CgkJCQkJZW51bWVyYWJsZTogZmFsc2UsCgkJCQkJdmFs\ndWU6IG5ldyBFbWl0dGVyeSgpLAoJCQkJfSk7CgkJCQlyZXR1cm4gdGhpc1tl\nbWl0dGVyeVByb3BlcnR5TmFtZV07CgkJCX0KCgkJCU9iamVjdC5kZWZpbmVQ\ncm9wZXJ0eSh0YXJnZXQucHJvdG90eXBlLCBlbWl0dGVyeVByb3BlcnR5TmFt\nZSwgewoJCQkJZW51bWVyYWJsZTogZmFsc2UsCgkJCQlnZXQ6IGdldEVtaXR0\nZXJ5UHJvcGVydHksCgkJCX0pOwoKCQkJY29uc3QgZW1pdHRlcnlNZXRob2RD\nYWxsZXIgPSBtZXRob2ROYW1lID0+IGZ1bmN0aW9uICguLi5hcmdzKSB7CgkJ\nCQlyZXR1cm4gdGhpc1tlbWl0dGVyeVByb3BlcnR5TmFtZV1bbWV0aG9kTmFt\nZV0oLi4uYXJncyk7CgkJCX07CgoJCQlmb3IgKGNvbnN0IG1ldGhvZE5hbWUg\nb2YgbWV0aG9kTmFtZXMpIHsKCQkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0\nYXJnZXQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7CgkJCQkJZW51bWVyYWJs\nZTogZmFsc2UsCgkJCQkJdmFsdWU6IGVtaXR0ZXJ5TWV0aG9kQ2FsbGVyKG1l\ndGhvZE5hbWUpLAoJCQkJfSk7CgkJCX0KCgkJCXJldHVybiB0YXJnZXQ7CgkJ\nfTsKCX0KCglzdGF0aWMgZ2V0IGlzRGVidWdFbmFibGVkKCkgewoJCS8vIElu\nIGEgYnJvd3NlciBlbnZpcm9ubWVudCwgYGdsb2JhbFRoaXMucHJvY2Vzc2Ag\nY2FuIHBvdGVudGlhbGx5IHJlZmVyZW5jZSBhIERPTSBFbGVtZW50IHdpdGgg\nYSBgI3Byb2Nlc3NgIElELAoJCS8vIHNvIGluc3RlYWQgb2YganVzdCB0eXBl\nIGNoZWNraW5nIGBnbG9iYWxUaGlzLnByb2Nlc3NgLCB3ZSBuZWVkIHRvIG1h\na2Ugc3VyZSB0aGF0IGBnbG9iYWxUaGlzLnByb2Nlc3MuZW52YCBleGlzdHMu\nCgkJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG4vcHJlZmVyLWdsb2Jh\nbC9wcm9jZXNzCgkJaWYgKHR5cGVvZiBnbG9iYWxUaGlzLnByb2Nlc3M/LmVu\ndiAhPT0gJ29iamVjdCcpIHsKCQkJcmV0dXJuIGlzR2xvYmFsRGVidWdFbmFi\nbGVkOwoJCX0KCgkJLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG4vcHJl\nZmVyLWdsb2JhbC9wcm9jZXNzCgkJY29uc3Qge2Vudn0gPSBnbG9iYWxUaGlz\nLnByb2Nlc3MgPz8ge2Vudjoge319OwoJCXJldHVybiBlbnYuREVCVUcgPT09\nICdlbWl0dGVyeScgfHwgZW52LkRFQlVHID09PSAnKicgfHwgaXNHbG9iYWxE\nZWJ1Z0VuYWJsZWQ7Cgl9CgoJc3RhdGljIHNldCBpc0RlYnVnRW5hYmxlZChu\nZXdWYWx1ZSkgewoJCWlzR2xvYmFsRGVidWdFbmFibGVkID0gbmV3VmFsdWU7\nCgl9CgoJY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7CgkJYW55TWFwLnNl\ndCh0aGlzLCBuZXcgU2V0KCkpOwoJCWV2ZW50c01hcC5zZXQodGhpcywgbmV3\nIE1hcCgpKTsKCQlwcm9kdWNlcnNNYXAuc2V0KHRoaXMsIG5ldyBNYXAoKSk7\nCgoJCXByb2R1Y2Vyc01hcC5nZXQodGhpcykuc2V0KGFueVByb2R1Y2VyLCBu\nZXcgU2V0KCkpOwoKCQl0aGlzLmRlYnVnID0gb3B0aW9ucy5kZWJ1ZyA/PyB7\nfTsKCgkJaWYgKHRoaXMuZGVidWcuZW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7\nCgkJCXRoaXMuZGVidWcuZW5hYmxlZCA9IGZhbHNlOwoJCX0KCgkJaWYgKCF0\naGlzLmRlYnVnLmxvZ2dlcikgewoJCQl0aGlzLmRlYnVnLmxvZ2dlciA9ICh0\neXBlLCBkZWJ1Z05hbWUsIGV2ZW50TmFtZSwgZXZlbnREYXRhKSA9PiB7CgkJ\nCQl0cnkgewoJCQkJCS8vIFRPRE86IFVzZSBodHRwczovL2dpdGh1Yi5jb20v\nc2luZHJlc29yaHVzL3NhZmUtc3RyaW5naWZ5IHdoZW4gdGhlIHBhY2thZ2Ug\naXMgbW9yZSBtYXR1cmUuIEp1c3QgY29weS1wYXN0ZSB0aGUgY29kZS4KCQkJ\nCQlldmVudERhdGEgPSBKU09OLnN0cmluZ2lmeShldmVudERhdGEpOwoJCQkJ\nfSBjYXRjaCB7CgkJCQkJZXZlbnREYXRhID0gYE9iamVjdCB3aXRoIHRoZSBm\nb2xsb3dpbmcga2V5cyBmYWlsZWQgdG8gc3RyaW5naWZ5OiAke09iamVjdC5r\nZXlzKGV2ZW50RGF0YSkuam9pbignLCcpfWA7CgkJCQl9CgoJCQkJaWYgKHR5\ncGVvZiBldmVudE5hbWUgPT09ICdzeW1ib2wnIHx8IHR5cGVvZiBldmVudE5h\nbWUgPT09ICdudW1iZXInKSB7CgkJCQkJZXZlbnROYW1lID0gZXZlbnROYW1l\nLnRvU3RyaW5nKCk7CgkJCQl9CgoJCQkJY29uc3QgY3VycmVudFRpbWUgPSBu\nZXcgRGF0ZSgpOwoJCQkJY29uc3QgbG9nVGltZSA9IGAke2N1cnJlbnRUaW1l\nLmdldEhvdXJzKCl9OiR7Y3VycmVudFRpbWUuZ2V0TWludXRlcygpfToke2N1\ncnJlbnRUaW1lLmdldFNlY29uZHMoKX0uJHtjdXJyZW50VGltZS5nZXRNaWxs\naXNlY29uZHMoKX1gOwoJCQkJY29uc29sZS5sb2coYFske2xvZ1RpbWV9XVtl\nbWl0dGVyeToke3R5cGV9XVske2RlYnVnTmFtZX1dIEV2ZW50IE5hbWU6ICR7\nZXZlbnROYW1lfVxuXHRkYXRhOiAke2V2ZW50RGF0YX1gKTsKCQkJfTsKCQl9\nCgl9CgoJbG9nSWZEZWJ1Z0VuYWJsZWQodHlwZSwgZXZlbnROYW1lLCBldmVu\ndERhdGEpIHsKCQlpZiAoRW1pdHRlcnkuaXNEZWJ1Z0VuYWJsZWQgfHwgdGhp\ncy5kZWJ1Zy5lbmFibGVkKSB7CgkJCXRoaXMuZGVidWcubG9nZ2VyKHR5cGUs\nIHRoaXMuZGVidWcubmFtZSwgZXZlbnROYW1lLCBldmVudERhdGEpOwoJCX0K\nCX0KCglvbihldmVudE5hbWVzLCBsaXN0ZW5lciwge3NpZ25hbH0gPSB7fSkg\newoJCWFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKCgkJZXZlbnROYW1lcyA9\nIEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2\nZW50TmFtZXNdOwoJCWZvciAoY29uc3QgZXZlbnROYW1lIG9mIGV2ZW50TmFt\nZXMpIHsKCQkJYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CgkJCWxldCBz\nZXQgPSBnZXRMaXN0ZW5lcnModGhpcywgZXZlbnROYW1lKTsKCQkJaWYgKCFz\nZXQpIHsKCQkJCXNldCA9IG5ldyBTZXQoKTsKCQkJCWNvbnN0IGV2ZW50cyA9\nIGV2ZW50c01hcC5nZXQodGhpcyk7CgkJCQlldmVudHMuc2V0KGV2ZW50TmFt\nZSwgc2V0KTsKCQkJfQoKCQkJc2V0LmFkZChsaXN0ZW5lcik7CgoJCQl0aGlz\nLmxvZ0lmRGVidWdFbmFibGVkKCdzdWJzY3JpYmUnLCBldmVudE5hbWUsIHVu\nZGVmaW5lZCk7CgoJCQlpZiAoIWlzTWV0YUV2ZW50KGV2ZW50TmFtZSkpIHsK\nCQkJCWVtaXRNZXRhRXZlbnQodGhpcywgbGlzdGVuZXJBZGRlZCwge2V2ZW50\nTmFtZSwgbGlzdGVuZXJ9KTsKCQkJfQoJCX0KCgkJY29uc3Qgb2ZmID0gKCkg\nPT4gewoJCQl0aGlzLm9mZihldmVudE5hbWVzLCBsaXN0ZW5lcik7CgkJCXNp\nZ25hbD8ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvZmYpOwoJCX07\nCgoJCXNpZ25hbD8uYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBvZmYsIHtv\nbmNlOiB0cnVlfSk7CgoJCWlmIChzaWduYWw/LmFib3J0ZWQpIHsKCQkJb2Zm\nKCk7CgkJfQoKCQlyZXR1cm4gb2ZmOwoJfQoKCW9mZihldmVudE5hbWVzLCBs\naXN0ZW5lcikgewoJCWFzc2VydExpc3RlbmVyKGxpc3RlbmVyKTsKCgkJZXZl\nbnROYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5h\nbWVzIDogW2V2ZW50TmFtZXNdOwoJCWZvciAoY29uc3QgZXZlbnROYW1lIG9m\nIGV2ZW50TmFtZXMpIHsKCQkJYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7\nCgkJCWNvbnN0IHNldCA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUp\nOwoJCQlpZiAoc2V0KSB7CgkJCQlzZXQuZGVsZXRlKGxpc3RlbmVyKTsKCQkJ\nCWlmIChzZXQuc2l6ZSA9PT0gMCkgewoJCQkJCWNvbnN0IGV2ZW50cyA9IGV2\nZW50c01hcC5nZXQodGhpcyk7CgkJCQkJZXZlbnRzLmRlbGV0ZShldmVudE5h\nbWUpOwoJCQkJfQoJCQl9CgoJCQl0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCd1\nbnN1YnNjcmliZScsIGV2ZW50TmFtZSwgdW5kZWZpbmVkKTsKCgkJCWlmICgh\naXNNZXRhRXZlbnQoZXZlbnROYW1lKSkgewoJCQkJZW1pdE1ldGFFdmVudCh0\naGlzLCBsaXN0ZW5lclJlbW92ZWQsIHtldmVudE5hbWUsIGxpc3RlbmVyfSk7\nCgkJCX0KCQl9Cgl9CgoJb25jZShldmVudE5hbWVzLCBwcmVkaWNhdGUpIHsK\nCQlpZiAocHJlZGljYXRlICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIHByZWRp\nY2F0ZSAhPT0gJ2Z1bmN0aW9uJykgewoJCQl0aHJvdyBuZXcgVHlwZUVycm9y\nKCdwcmVkaWNhdGUgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7CgkJfQoKCQlsZXQg\nb2ZmXzsKCgkJY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUg\nPT4gewoJCQlvZmZfID0gdGhpcy5vbihldmVudE5hbWVzLCBkYXRhID0+IHsK\nCQkJCWlmIChwcmVkaWNhdGUgJiYgIXByZWRpY2F0ZShkYXRhKSkgewoJCQkJ\nCXJldHVybjsKCQkJCX0KCgkJCQlvZmZfKCk7CgkJCQlyZXNvbHZlKGRhdGEp\nOwoJCQl9KTsKCQl9KTsKCgkJcHJvbWlzZS5vZmYgPSBvZmZfOwoJCXJldHVy\nbiBwcm9taXNlOwoJfQoKCWV2ZW50cyhldmVudE5hbWVzKSB7CgkJZXZlbnRO\nYW1lcyA9IEFycmF5LmlzQXJyYXkoZXZlbnROYW1lcykgPyBldmVudE5hbWVz\nIDogW2V2ZW50TmFtZXNdOwoJCWZvciAoY29uc3QgZXZlbnROYW1lIG9mIGV2\nZW50TmFtZXMpIHsKCQkJYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CgkJ\nfQoKCQlyZXR1cm4gaXRlcmF0b3IodGhpcywgZXZlbnROYW1lcyk7Cgl9CgoJ\nYXN5bmMgZW1pdChldmVudE5hbWUsIGV2ZW50RGF0YSkgewoJCWFzc2VydEV2\nZW50TmFtZShldmVudE5hbWUpOwoKCQlpZiAoaXNNZXRhRXZlbnQoZXZlbnRO\nYW1lKSAmJiAhY2FuRW1pdE1ldGFFdmVudHMpIHsKCQkJdGhyb3cgbmV3IFR5\ncGVFcnJvcignYGV2ZW50TmFtZWAgY2Fubm90IGJlIG1ldGEgZXZlbnQgYGxp\nc3RlbmVyQWRkZWRgIG9yIGBsaXN0ZW5lclJlbW92ZWRgJyk7CgkJfQoKCQl0\naGlzLmxvZ0lmRGVidWdFbmFibGVkKCdlbWl0JywgZXZlbnROYW1lLCBldmVu\ndERhdGEpOwoKCQllbnF1ZXVlUHJvZHVjZXJzKHRoaXMsIGV2ZW50TmFtZSwg\nZXZlbnREYXRhKTsKCgkJY29uc3QgbGlzdGVuZXJzID0gZ2V0TGlzdGVuZXJz\nKHRoaXMsIGV2ZW50TmFtZSkgPz8gbmV3IFNldCgpOwoJCWNvbnN0IGFueUxp\nc3RlbmVycyA9IGFueU1hcC5nZXQodGhpcyk7CgkJY29uc3Qgc3RhdGljTGlz\ndGVuZXJzID0gWy4uLmxpc3RlbmVyc107CgkJY29uc3Qgc3RhdGljQW55TGlz\ndGVuZXJzID0gaXNNZXRhRXZlbnQoZXZlbnROYW1lKSA/IFtdIDogWy4uLmFu\neUxpc3RlbmVyc107CgoJCWF3YWl0IHJlc29sdmVkUHJvbWlzZTsKCQlhd2Fp\ndCBQcm9taXNlLmFsbChbCgkJCS4uLnN0YXRpY0xpc3RlbmVycy5tYXAoYXN5\nbmMgbGlzdGVuZXIgPT4gewoJCQkJaWYgKGxpc3RlbmVycy5oYXMobGlzdGVu\nZXIpKSB7CgkJCQkJcmV0dXJuIGxpc3RlbmVyKGV2ZW50RGF0YSk7CgkJCQl9\nCgkJCX0pLAoJCQkuLi5zdGF0aWNBbnlMaXN0ZW5lcnMubWFwKGFzeW5jIGxp\nc3RlbmVyID0+IHsKCQkJCWlmIChhbnlMaXN0ZW5lcnMuaGFzKGxpc3RlbmVy\nKSkgewoJCQkJCXJldHVybiBsaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50RGF0\nYSk7CgkJCQl9CgkJCX0pLAoJCV0pOwoJfQoKCWFzeW5jIGVtaXRTZXJpYWwo\nZXZlbnROYW1lLCBldmVudERhdGEpIHsKCQlhc3NlcnRFdmVudE5hbWUoZXZl\nbnROYW1lKTsKCgkJaWYgKGlzTWV0YUV2ZW50KGV2ZW50TmFtZSkgJiYgIWNh\nbkVtaXRNZXRhRXZlbnRzKSB7CgkJCXRocm93IG5ldyBUeXBlRXJyb3IoJ2Bl\ndmVudE5hbWVgIGNhbm5vdCBiZSBtZXRhIGV2ZW50IGBsaXN0ZW5lckFkZGVk\nYCBvciBgbGlzdGVuZXJSZW1vdmVkYCcpOwoJCX0KCgkJdGhpcy5sb2dJZkRl\nYnVnRW5hYmxlZCgnZW1pdFNlcmlhbCcsIGV2ZW50TmFtZSwgZXZlbnREYXRh\nKTsKCgkJZW5xdWV1ZVByb2R1Y2Vycyh0aGlzLCBldmVudE5hbWUsIGV2ZW50\nRGF0YSk7CgoJCWNvbnN0IGxpc3RlbmVycyA9IGdldExpc3RlbmVycyh0aGlz\nLCBldmVudE5hbWUpID8/IG5ldyBTZXQoKTsKCQljb25zdCBhbnlMaXN0ZW5l\ncnMgPSBhbnlNYXAuZ2V0KHRoaXMpOwoJCWNvbnN0IHN0YXRpY0xpc3RlbmVy\ncyA9IFsuLi5saXN0ZW5lcnNdOwoJCWNvbnN0IHN0YXRpY0FueUxpc3RlbmVy\ncyA9IGlzTWV0YUV2ZW50KGV2ZW50TmFtZSkgPyBbXSA6IFsuLi5hbnlMaXN0\nZW5lcnNdOwoKCQlhd2FpdCByZXNvbHZlZFByb21pc2U7CgkJLyogZXNsaW50\nLWRpc2FibGUgbm8tYXdhaXQtaW4tbG9vcCAqLwoJCWZvciAoY29uc3QgbGlz\ndGVuZXIgb2Ygc3RhdGljTGlzdGVuZXJzKSB7CgkJCWlmIChsaXN0ZW5lcnMu\naGFzKGxpc3RlbmVyKSkgewoJCQkJYXdhaXQgbGlzdGVuZXIoZXZlbnREYXRh\nKTsKCQkJfQoJCX0KCgkJZm9yIChjb25zdCBsaXN0ZW5lciBvZiBzdGF0aWNB\nbnlMaXN0ZW5lcnMpIHsKCQkJaWYgKGFueUxpc3RlbmVycy5oYXMobGlzdGVu\nZXIpKSB7CgkJCQlhd2FpdCBsaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50RGF0\nYSk7CgkJCX0KCQl9CgkJLyogZXNsaW50LWVuYWJsZSBuby1hd2FpdC1pbi1s\nb29wICovCgl9CgoJb25BbnkobGlzdGVuZXIsIHtzaWduYWx9ID0ge30pIHsK\nCQlhc3NlcnRMaXN0ZW5lcihsaXN0ZW5lcik7CgoJCXRoaXMubG9nSWZEZWJ1\nZ0VuYWJsZWQoJ3N1YnNjcmliZUFueScsIHVuZGVmaW5lZCwgdW5kZWZpbmVk\nKTsKCgkJYW55TWFwLmdldCh0aGlzKS5hZGQobGlzdGVuZXIpOwoJCWVtaXRN\nZXRhRXZlbnQodGhpcywgbGlzdGVuZXJBZGRlZCwge2xpc3RlbmVyfSk7CgoJ\nCWNvbnN0IG9mZkFueSA9ICgpID0+IHsKCQkJdGhpcy5vZmZBbnkobGlzdGVu\nZXIpOwoJCQlzaWduYWw/LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0Jywg\nb2ZmQW55KTsKCQl9OwoKCQlzaWduYWw/LmFkZEV2ZW50TGlzdGVuZXIoJ2Fi\nb3J0Jywgb2ZmQW55LCB7b25jZTogdHJ1ZX0pOwoKCQlpZiAoc2lnbmFsPy5h\nYm9ydGVkKSB7CgkJCW9mZkFueSgpOwoJCX0KCgkJcmV0dXJuIG9mZkFueTsK\nCX0KCglhbnlFdmVudCgpIHsKCQlyZXR1cm4gaXRlcmF0b3IodGhpcyk7Cgl9\nCgoJb2ZmQW55KGxpc3RlbmVyKSB7CgkJYXNzZXJ0TGlzdGVuZXIobGlzdGVu\nZXIpOwoKCQl0aGlzLmxvZ0lmRGVidWdFbmFibGVkKCd1bnN1YnNjcmliZUFu\neScsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKCgkJZW1pdE1ldGFFdmVudCh0\naGlzLCBsaXN0ZW5lclJlbW92ZWQsIHtsaXN0ZW5lcn0pOwoJCWFueU1hcC5n\nZXQodGhpcykuZGVsZXRlKGxpc3RlbmVyKTsKCX0KCgljbGVhckxpc3RlbmVy\ncyhldmVudE5hbWVzKSB7CgkJZXZlbnROYW1lcyA9IEFycmF5LmlzQXJyYXko\nZXZlbnROYW1lcykgPyBldmVudE5hbWVzIDogW2V2ZW50TmFtZXNdOwoKCQlm\nb3IgKGNvbnN0IGV2ZW50TmFtZSBvZiBldmVudE5hbWVzKSB7CgkJCXRoaXMu\nbG9nSWZEZWJ1Z0VuYWJsZWQoJ2NsZWFyJywgZXZlbnROYW1lLCB1bmRlZmlu\nZWQpOwoKCQkJaWYgKGlzRXZlbnRLZXlUeXBlKGV2ZW50TmFtZSkpIHsKCQkJ\nCWNvbnN0IHNldCA9IGdldExpc3RlbmVycyh0aGlzLCBldmVudE5hbWUpOwoJ\nCQkJaWYgKHNldCkgewoJCQkJCXNldC5jbGVhcigpOwoJCQkJfQoKCQkJCWNv\nbnN0IHByb2R1Y2VycyA9IGdldEV2ZW50UHJvZHVjZXJzKHRoaXMsIGV2ZW50\nTmFtZSk7CgkJCQlpZiAocHJvZHVjZXJzKSB7CgkJCQkJZm9yIChjb25zdCBw\ncm9kdWNlciBvZiBwcm9kdWNlcnMpIHsKCQkJCQkJcHJvZHVjZXIuZmluaXNo\nKCk7CgkJCQkJfQoKCQkJCQlwcm9kdWNlcnMuY2xlYXIoKTsKCQkJCX0KCQkJ\nfSBlbHNlIHsKCQkJCWFueU1hcC5nZXQodGhpcykuY2xlYXIoKTsKCgkJCQlm\nb3IgKGNvbnN0IFtldmVudE5hbWUsIGxpc3RlbmVyc10gb2YgZXZlbnRzTWFw\nLmdldCh0aGlzKS5lbnRyaWVzKCkpIHsKCQkJCQlsaXN0ZW5lcnMuY2xlYXIo\nKTsKCQkJCQlldmVudHNNYXAuZ2V0KHRoaXMpLmRlbGV0ZShldmVudE5hbWUp\nOwoJCQkJfQoKCQkJCWZvciAoY29uc3QgW2V2ZW50TmFtZSwgcHJvZHVjZXJz\nXSBvZiBwcm9kdWNlcnNNYXAuZ2V0KHRoaXMpLmVudHJpZXMoKSkgewoJCQkJ\nCWZvciAoY29uc3QgcHJvZHVjZXIgb2YgcHJvZHVjZXJzKSB7CgkJCQkJCXBy\nb2R1Y2VyLmZpbmlzaCgpOwoJCQkJCX0KCgkJCQkJcHJvZHVjZXJzLmNsZWFy\nKCk7CgkJCQkJcHJvZHVjZXJzTWFwLmdldCh0aGlzKS5kZWxldGUoZXZlbnRO\nYW1lKTsKCQkJCX0KCQkJfQoJCX0KCX0KCglsaXN0ZW5lckNvdW50KGV2ZW50\nTmFtZXMpIHsKCQlldmVudE5hbWVzID0gQXJyYXkuaXNBcnJheShldmVudE5h\nbWVzKSA/IGV2ZW50TmFtZXMgOiBbZXZlbnROYW1lc107CgkJbGV0IGNvdW50\nID0gMDsKCgkJZm9yIChjb25zdCBldmVudE5hbWUgb2YgZXZlbnROYW1lcykg\newoJCQlpZiAoaXNFdmVudEtleVR5cGUoZXZlbnROYW1lKSkgewoJCQkJY291\nbnQgKz0gYW55TWFwLmdldCh0aGlzKS5zaXplCgkJCQkJKyAoZ2V0TGlzdGVu\nZXJzKHRoaXMsIGV2ZW50TmFtZSk/LnNpemUgPz8gMCkKCQkJCQkrIChnZXRF\ndmVudFByb2R1Y2Vycyh0aGlzLCBldmVudE5hbWUpPy5zaXplID8/IDApCgkJ\nCQkJKyAoZ2V0RXZlbnRQcm9kdWNlcnModGhpcyk/LnNpemUgPz8gMCk7CgoJ\nCQkJY29udGludWU7CgkJCX0KCgkJCWlmIChldmVudE5hbWUgIT09IHVuZGVm\naW5lZCkgewoJCQkJYXNzZXJ0RXZlbnROYW1lKGV2ZW50TmFtZSk7CgkJCX0K\nCgkJCWNvdW50ICs9IGFueU1hcC5nZXQodGhpcykuc2l6ZTsKCgkJCWZvciAo\nY29uc3QgdmFsdWUgb2YgZXZlbnRzTWFwLmdldCh0aGlzKS52YWx1ZXMoKSkg\newoJCQkJY291bnQgKz0gdmFsdWUuc2l6ZTsKCQkJfQoKCQkJZm9yIChjb25z\ndCB2YWx1ZSBvZiBwcm9kdWNlcnNNYXAuZ2V0KHRoaXMpLnZhbHVlcygpKSB7\nCgkJCQljb3VudCArPSB2YWx1ZS5zaXplOwoJCQl9CgkJfQoKCQlyZXR1cm4g\nY291bnQ7Cgl9CgoJYmluZE1ldGhvZHModGFyZ2V0LCBtZXRob2ROYW1lcykg\newoJCWlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnb2JqZWN0JyB8fCB0YXJnZXQg\nPT09IG51bGwpIHsKCQkJdGhyb3cgbmV3IFR5cGVFcnJvcignYHRhcmdldGAg\nbXVzdCBiZSBhbiBvYmplY3QnKTsKCQl9CgoJCW1ldGhvZE5hbWVzID0gZGVm\nYXVsdE1ldGhvZE5hbWVzT3JBc3NlcnQobWV0aG9kTmFtZXMpOwoKCQlmb3Ig\nKGNvbnN0IG1ldGhvZE5hbWUgb2YgbWV0aG9kTmFtZXMpIHsKCQkJaWYgKHRh\ncmdldFttZXRob2ROYW1lXSAhPT0gdW5kZWZpbmVkKSB7CgkJCQl0aHJvdyBu\nZXcgRXJyb3IoYFRoZSBwcm9wZXJ0eSBcYCR7bWV0aG9kTmFtZX1cYCBhbHJl\nYWR5IGV4aXN0cyBvbiBcYHRhcmdldFxgYCk7CgkJCX0KCgkJCU9iamVjdC5k\nZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIG1ldGhvZE5hbWUsIHsKCQkJCWVudW1l\ncmFibGU6IGZhbHNlLAoJCQkJdmFsdWU6IHRoaXNbbWV0aG9kTmFtZV0uYmlu\nZCh0aGlzKSwKCQkJfSk7CgkJfQoJfQp9Cgpjb25zdCBhbGxFbWl0dGVyeU1l\ndGhvZHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhFbWl0dGVyeS5w\ncm90b3R5cGUpLmZpbHRlcih2ID0+IHYgIT09ICdjb25zdHJ1Y3RvcicpOwoK\nT2JqZWN0LmRlZmluZVByb3BlcnR5KEVtaXR0ZXJ5LCAnbGlzdGVuZXJBZGRl\nZCcsIHsKCXZhbHVlOiBsaXN0ZW5lckFkZGVkLAoJd3JpdGFibGU6IGZhbHNl\nLAoJZW51bWVyYWJsZTogdHJ1ZSwKCWNvbmZpZ3VyYWJsZTogZmFsc2UsCn0p\nOwpPYmplY3QuZGVmaW5lUHJvcGVydHkoRW1pdHRlcnksICdsaXN0ZW5lclJl\nbW92ZWQnLCB7Cgl2YWx1ZTogbGlzdGVuZXJSZW1vdmVkLAoJd3JpdGFibGU6\nIGZhbHNlLAoJZW51bWVyYWJsZTogdHJ1ZSwKCWNvbmZpZ3VyYWJsZTogZmFs\nc2UsCn0pOwo=\n", "encoding": "base64", "_links": {"self": "https://api.github.com/repos/sindresorhus/emittery/contents/index.js?ref=main", "git": "https://api.github.com/repos/sindresorhus/emittery/git/blobs/cbc53018b107541a23bcbe090524486a824506cb", "html": "https://github.com/sindresorhus/emittery/blob/main/index.js"}}