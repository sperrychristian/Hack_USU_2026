{"name": "knr2ansi.py", "path": "scripts/knr2ansi.py", "sha": "e54f21b63394f5e094bbf3445833c11bc6e42f4f", "size": 11400, "url": "https://api.github.com/repos/gvanrossum/abc-unix/contents/scripts/knr2ansi.py?ref=main", "html_url": "https://github.com/gvanrossum/abc-unix/blob/main/scripts/knr2ansi.py", "git_url": "https://api.github.com/repos/gvanrossum/abc-unix/git/blobs/e54f21b63394f5e094bbf3445833c11bc6e42f4f", "download_url": "https://raw.githubusercontent.com/gvanrossum/abc-unix/main/scripts/knr2ansi.py", "type": "file", "content": "IyEvdXNyL2Jpbi9lbnYgcHl0aG9uMwoiIiJDb252ZXJ0IEsmUi1zdHlsZSBm\ndW5jdGlvbiBkZWZpbml0aW9ucyB0byBBTlNJIHByb3RvdHlwZXMgaW4tcGxh\nY2UuCgpHaXZlbiBvbmUgb3IgbW9yZSBDIHNvdXJjZSBmaWxlcywgdGhpcyBz\nY3JpcHQgc2VhcmNoZXMgZm9yIGZ1bmN0aW9ucyB0aGF0IHVzZQpvbGQtc3R5\nbGUgKEsmUikgcGFyYW1ldGVyIGRlY2xhcmF0aW9ucyBhbmQgcmV3cml0ZXMg\ndGhlaXIgc2lnbmF0dXJlcyB0byBtb2Rlcm4KQU5TSSBmb3JtLiBPbmx5IHRo\nZSBmdW5jdGlvbiBoZWFkZXIgaXMgdG91Y2hlZDsgdGhlIGJvZHkgc3RheXMg\ndW50b3VjaGVkLgoKVXNhZ2U6CiAgICBweXRob24gc2NyaXB0cy9rbnIyYW5z\naS5weSBwYXRoL3RvL2ZpbGUuYyBbbW9yZS5jIC4uLl0KClVzZSAtLWRyeS1y\ndW4gdG8gc2VlIHdoaWNoIGZ1bmN0aW9ucyB3b3VsZCBjaGFuZ2Ugd2l0aG91\ndCBlZGl0aW5nIGZpbGVzLgoiIiIKZnJvbSBfX2Z1dHVyZV9fIGltcG9ydCBh\nbm5vdGF0aW9ucwoKaW1wb3J0IGFyZ3BhcnNlCmltcG9ydCByZQppbXBvcnQg\nc3lzCmZyb20gcGF0aGxpYiBpbXBvcnQgUGF0aApmcm9tIHR5cGluZyBpbXBv\ncnQgRGljdCwgTGlzdCwgT3B0aW9uYWwsIFNlcXVlbmNlLCBUdXBsZQoKX0lE\nRU5USUZJRVJfUkUgPSByZS5jb21waWxlKHIiW0EtWmEtel9dWzAtOUEtWmEt\nel9dKiIpCl9LRVlXT1JEUyA9IHsiaWYiLCAiZm9yIiwgIndoaWxlIiwgInN3\naXRjaCIsICJjYXNlIiwgInJldHVybiJ9CgoKZGVmIF9zdHJpcF9jX2NvbW1l\nbnRzKHRleHQ6IHN0cikgLT4gc3RyOgogICAgIiIiUmVtb3ZlIC8qIC4uLiAq\nLyBhbmQgLy8gLi4uIGNvbW1lbnRzIGZyb20gYSBzbmlwcGV0LiIiIgogICAg\ncmVzdWx0OiBMaXN0W3N0cl0gPSBbXQogICAgaSA9IDAKICAgIGxlbmd0aCA9\nIGxlbih0ZXh0KQogICAgd2hpbGUgaSA8IGxlbmd0aDoKICAgICAgICBjaCA9\nIHRleHRbaV0KICAgICAgICBueHQgPSB0ZXh0W2kgKyAxXSBpZiBpICsgMSA8\nIGxlbmd0aCBlbHNlICIiCiAgICAgICAgaWYgY2ggPT0gIi8iIGFuZCBueHQg\nPT0gIioiOgogICAgICAgICAgICBlbmQgPSB0ZXh0LmZpbmQoIiovIiwgaSAr\nIDIpCiAgICAgICAgICAgIGlmIGVuZCA9PSAtMToKICAgICAgICAgICAgICAg\nIGJyZWFrCiAgICAgICAgICAgIGkgPSBlbmQgKyAyCiAgICAgICAgICAgIGNv\nbnRpbnVlCiAgICAgICAgaWYgY2ggPT0gIi8iIGFuZCBueHQgPT0gIi8iOgog\nICAgICAgICAgICBlbmQgPSB0ZXh0LmZpbmQoIlxuIiwgaSArIDIpCiAgICAg\nICAgICAgIGlmIGVuZCA9PSAtMToKICAgICAgICAgICAgICAgIGJyZWFrCiAg\nICAgICAgICAgIGkgPSBlbmQKICAgICAgICAgICAgY29udGludWUKICAgICAg\nICByZXN1bHQuYXBwZW5kKGNoKQogICAgICAgIGkgKz0gMQogICAgcmV0dXJu\nICIiLmpvaW4ocmVzdWx0KQoKCmRlZiBfc3BsaXRfcGFyYW1fbmFtZXMocGFy\nYW1fY2h1bms6IHN0cikgLT4gTGlzdFtzdHJdOgogICAgY2xlYW5lZCA9IF9z\ndHJpcF9jX2NvbW1lbnRzKHBhcmFtX2NodW5rKQogICAgbmFtZXMgPSBbaXRl\nbS5zdHJpcCgpIGZvciBpdGVtIGluIGNsZWFuZWQuc3BsaXQoIiwiKV0KICAg\nIHJldHVybiBbbmFtZSBmb3IgbmFtZSBpbiBuYW1lcyBpZiBuYW1lXQoKCmRl\nZiBfc3BsaXRfZGVjbGFyYXRvcnModGV4dDogc3RyKSAtPiBMaXN0W3N0cl06\nCiAgICBkZWNsczogTGlzdFtzdHJdID0gW10KICAgIGN1cnJlbnQ6IExpc3Rb\nc3RyXSA9IFtdCiAgICBkZXB0aF9wYXJlbiA9IGRlcHRoX2JyYWNrZXQgPSAw\nCiAgICBmb3IgY2ggaW4gdGV4dDoKICAgICAgICBpZiBjaCA9PSAiLCIgYW5k\nIGRlcHRoX3BhcmVuID09IGRlcHRoX2JyYWNrZXQgPT0gMDoKICAgICAgICAg\nICAgcGllY2UgPSAiIi5qb2luKGN1cnJlbnQpLnN0cmlwKCkKICAgICAgICAg\nICAgaWYgcGllY2U6CiAgICAgICAgICAgICAgICBkZWNscy5hcHBlbmQocGll\nY2UpCiAgICAgICAgICAgIGN1cnJlbnQgPSBbXQogICAgICAgICAgICBjb250\naW51ZQogICAgICAgIGN1cnJlbnQuYXBwZW5kKGNoKQogICAgICAgIGlmIGNo\nID09ICIoIjoKICAgICAgICAgICAgZGVwdGhfcGFyZW4gKz0gMQogICAgICAg\nIGVsaWYgY2ggPT0gIikiOgogICAgICAgICAgICBkZXB0aF9wYXJlbiA9IG1h\neCgwLCBkZXB0aF9wYXJlbiAtIDEpCiAgICAgICAgZWxpZiBjaCA9PSAiWyI6\nCiAgICAgICAgICAgIGRlcHRoX2JyYWNrZXQgKz0gMQogICAgICAgIGVsaWYg\nY2ggPT0gIl0iOgogICAgICAgICAgICBkZXB0aF9icmFja2V0ID0gbWF4KDAs\nIGRlcHRoX2JyYWNrZXQgLSAxKQogICAgdGFpbCA9ICIiLmpvaW4oY3VycmVu\ndCkuc3RyaXAoKQogICAgaWYgdGFpbDoKICAgICAgICBkZWNscy5hcHBlbmQo\ndGFpbCkKICAgIHJldHVybiBkZWNscwoKCmRlZiBfZXh0cmFjdF9uYW1lKGRl\nY2w6IHN0ciwgY2FuZGlkYXRlczogU2VxdWVuY2Vbc3RyXSkgLT4gT3B0aW9u\nYWxbc3RyXToKICAgIGNhbmRfc2V0ID0gc2V0KGNhbmRpZGF0ZXMpCiAgICBt\nYXRjaF9uYW1lOiBPcHRpb25hbFtzdHJdID0gTm9uZQogICAgZm9yIG1hdGNo\nIGluIF9JREVOVElGSUVSX1JFLmZpbmRpdGVyKGRlY2wpOgogICAgICAgIHRv\na2VuID0gbWF0Y2guZ3JvdXAoMCkKICAgICAgICBpZiB0b2tlbiBpbiBjYW5k\nX3NldDoKICAgICAgICAgICAgbWF0Y2hfbmFtZSA9IHRva2VuCiAgICBpZiBt\nYXRjaF9uYW1lOgogICAgICAgIHJldHVybiBtYXRjaF9uYW1lCiAgICBpZGVu\ndGlmaWVycyA9IF9JREVOVElGSUVSX1JFLmZpbmRhbGwoZGVjbCkKICAgIHJl\ndHVybiBpZGVudGlmaWVyc1stMV0gaWYgaWRlbnRpZmllcnMgZWxzZSBOb25l\nCgoKZGVmIF9zcGxpdF9iYXNlX2FuZF9kZWNscyhzdGF0ZW1lbnQ6IHN0ciwg\nbmFtZV9yZWdleDogcmUuUGF0dGVybltzdHJdKSAtPiBPcHRpb25hbFtUdXBs\nZVtzdHIsIHN0cl1dOgogICAgc3RtdCA9IHN0YXRlbWVudC5zdHJpcCgpCiAg\nICBpZiBzdG10LmVuZHN3aXRoKCI7Iik6CiAgICAgICAgc3RtdCA9IHN0bXRb\nOi0xXQogICAgbWF0Y2ggPSBuYW1lX3JlZ2V4LnNlYXJjaChzdG10KQogICAg\naWYgbm90IG1hdGNoOgogICAgICAgIHJldHVybiBOb25lCiAgICBiYXNlID0g\nc3RtdFs6IG1hdGNoLnN0YXJ0KCldLnJzdHJpcCgpCiAgICBkZWNscyA9IHN0\nbXRbbWF0Y2guc3RhcnQoKTpdCiAgICBwdHJfcHJlZml4ID0gW10KICAgIHdo\naWxlIGJhc2UuZW5kc3dpdGgoIioiKToKICAgICAgICBwdHJfcHJlZml4LmFw\ncGVuZCgiKiIpCiAgICAgICAgYmFzZSA9IGJhc2VbOi0xXS5yc3RyaXAoKQog\nICAgZGVjbHMgPSAiIi5qb2luKHJldmVyc2VkKHB0cl9wcmVmaXgpKSArIGRl\nY2xzCiAgICByZXR1cm4gYmFzZS5zdHJpcCgpLCBkZWNscy5zdHJpcCgpCgoK\nZGVmIF9wYXJzZV9wYXJhbV9ibG9jayhibG9jazogc3RyLCBwYXJhbV9uYW1l\nczogU2VxdWVuY2Vbc3RyXSkgLT4gT3B0aW9uYWxbRGljdFtzdHIsIHN0cl1d\nOgogICAgaWYgbm90IHBhcmFtX25hbWVzOgogICAgICAgIHJldHVybiB7fQog\nICAgc3RyaXBwZWQgPSBibG9jay5zdHJpcCgpCiAgICBpZiBub3Qgc3RyaXBw\nZWQ6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIGlmIGFueShzeW1ib2wgaW4g\nc3RyaXBwZWQgZm9yIHN5bWJvbCBpbiAie30iKToKICAgICAgICByZXR1cm4g\nTm9uZQogICAgbG93ZXJlZCA9IHN0cmlwcGVkLmxvd2VyKCkKICAgIGlmIGFu\neShrZXl3b3JkIGluIGxvd2VyZWQgZm9yIGtleXdvcmQgaW4gX0tFWVdPUkRT\nKToKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgIj0iIGluIHN0cmlwcGVk\nIG9yICIjIiBpbiBzdHJpcHBlZDoKICAgICAgICByZXR1cm4gTm9uZQogICAg\naWYgIjsiIG5vdCBpbiBzdHJpcHBlZDoKICAgICAgICByZXR1cm4gTm9uZQoK\nICAgIHBhdHRlcm4gPSByZS5jb21waWxlKHIiXGIoIiArICJ8Ii5qb2luKHJl\nLmVzY2FwZShuYW1lKSBmb3IgbmFtZSBpbiBwYXJhbV9uYW1lcykgKyByIilc\nYiIpCiAgICBtYXBwaW5nOiBEaWN0W3N0ciwgc3RyXSA9IHt9CiAgICBmb3Ig\ncmF3IGluIHN0cmlwcGVkLnNwbGl0KCI7Iik6CiAgICAgICAgc3RtdCA9IHJh\ndy5zdHJpcCgpCiAgICAgICAgaWYgbm90IHN0bXQ6CiAgICAgICAgICAgIGNv\nbnRpbnVlCiAgICAgICAgc3BsaXRfcmVzdWx0ID0gX3NwbGl0X2Jhc2VfYW5k\nX2RlY2xzKHN0bXQgKyAiOyIsIHBhdHRlcm4pCiAgICAgICAgaWYgbm90IHNw\nbGl0X3Jlc3VsdDoKICAgICAgICAgICAgY29udGludWUKICAgICAgICBiYXNl\nLCBkZWNscyA9IHNwbGl0X3Jlc3VsdAogICAgICAgIGlmIG5vdCBiYXNlOgog\nICAgICAgICAgICBjb250aW51ZQogICAgICAgIGZvciBkZWNsIGluIF9zcGxp\ndF9kZWNsYXJhdG9ycyhkZWNscyk6CiAgICAgICAgICAgIG5hbWUgPSBfZXh0\ncmFjdF9uYW1lKGRlY2wsIHBhcmFtX25hbWVzKQogICAgICAgICAgICBpZiBu\nb3QgbmFtZToKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgICAg\nIHR5cGVfd2l0aF9uYW1lID0gZiJ7YmFzZX0ge2RlY2x9Ii5zdHJpcCgpCiAg\nICAgICAgICAgIG1hcHBpbmdbbmFtZV0gPSAiICIuam9pbih0eXBlX3dpdGhf\nbmFtZS5zcGxpdCgpKQogICAgaWYgbGVuKG1hcHBpbmcpICE9IGxlbihwYXJh\nbV9uYW1lcyk6CiAgICAgICAgbWlzc2luZyA9IFtuYW1lIGZvciBuYW1lIGlu\nIHBhcmFtX25hbWVzIGlmIG5hbWUgbm90IGluIG1hcHBpbmddCiAgICAgICAg\naWYgbWlzc2luZzoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgIHJldHVy\nbiBtYXBwaW5nCgoKZGVmIF9za2lwX3doaXRlc3BhY2VfYW5kX2NvbW1lbnRz\nKHRleHQ6IHN0ciwgc3RhcnQ6IGludCkgLT4gaW50OgogICAgaSA9IHN0YXJ0\nCiAgICBsZW5ndGggPSBsZW4odGV4dCkKICAgIHdoaWxlIGkgPCBsZW5ndGg6\nCiAgICAgICAgY2ggPSB0ZXh0W2ldCiAgICAgICAgbnh0ID0gdGV4dFtpICsg\nMV0gaWYgaSArIDEgPCBsZW5ndGggZWxzZSAiIgogICAgICAgIGlmIGNoIGlu\nICIgXHRcclxuIjoKICAgICAgICAgICAgaSArPSAxCiAgICAgICAgICAgIGNv\nbnRpbnVlCiAgICAgICAgaWYgY2ggPT0gIi8iIGFuZCBueHQgPT0gIioiOgog\nICAgICAgICAgICBlbmQgPSB0ZXh0LmZpbmQoIiovIiwgaSArIDIpCiAgICAg\nICAgICAgIGlmIGVuZCA9PSAtMToKICAgICAgICAgICAgICAgIHJldHVybiBs\nZW5ndGgKICAgICAgICAgICAgaSA9IGVuZCArIDIKICAgICAgICAgICAgY29u\ndGludWUKICAgICAgICBpZiBjaCA9PSAiLyIgYW5kIG54dCA9PSAiLyI6CiAg\nICAgICAgICAgIGVuZCA9IHRleHQuZmluZCgiXG4iLCBpICsgMikKICAgICAg\nICAgICAgaWYgZW5kID09IC0xOgogICAgICAgICAgICAgICAgcmV0dXJuIGxl\nbmd0aAogICAgICAgICAgICBpID0gZW5kICsgMQogICAgICAgICAgICBjb250\naW51ZQogICAgICAgIGJyZWFrCiAgICByZXR1cm4gaQoKCmRlZiBfc2tpcF9z\ndHJpbmdfbGl0ZXJhbCh0ZXh0OiBzdHIsIHN0YXJ0OiBpbnQpIC0+IGludDoK\nICAgIHF1b3RlID0gdGV4dFtzdGFydF0KICAgIGkgPSBzdGFydCArIDEKICAg\nIGxlbmd0aCA9IGxlbih0ZXh0KQogICAgd2hpbGUgaSA8IGxlbmd0aDoKICAg\nICAgICBjaCA9IHRleHRbaV0KICAgICAgICBpZiBjaCA9PSAiXFwiOgogICAg\nICAgICAgICBpICs9IDIKICAgICAgICAgICAgY29udGludWUKICAgICAgICBp\nZiBjaCA9PSBxdW90ZToKICAgICAgICAgICAgcmV0dXJuIGkgKyAxCiAgICAg\nICAgaSArPSAxCiAgICByZXR1cm4gbGVuZ3RoCgoKZGVmIF9maW5kX21hdGNo\naW5nX3BhcmVuKHRleHQ6IHN0ciwgb3Blbl9pZHg6IGludCkgLT4gT3B0aW9u\nYWxbaW50XToKICAgIGRlcHRoID0gMQogICAgaSA9IG9wZW5faWR4ICsgMQog\nICAgbGVuZ3RoID0gbGVuKHRleHQpCiAgICB3aGlsZSBpIDwgbGVuZ3RoIGFu\nZCBkZXB0aCA+IDA6CiAgICAgICAgY2ggPSB0ZXh0W2ldCiAgICAgICAgaWYg\nY2ggPT0gIigiOgogICAgICAgICAgICBkZXB0aCArPSAxCiAgICAgICAgICAg\nIGkgKz0gMQogICAgICAgICAgICBjb250aW51ZQogICAgICAgIGlmIGNoID09\nICIpIjoKICAgICAgICAgICAgZGVwdGggLT0gMQogICAgICAgICAgICBpICs9\nIDEKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpZiBjaCBpbiB7JyIn\nLCAiJyJ9OgogICAgICAgICAgICBpID0gX3NraXBfc3RyaW5nX2xpdGVyYWwo\ndGV4dCwgaSkKICAgICAgICAgICAgY29udGludWUKICAgICAgICBpICs9IDEK\nICAgIHJldHVybiBpIC0gMSBpZiBkZXB0aCA9PSAwIGVsc2UgTm9uZQoKCmRl\nZiBfY29sbGVjdF9wcmVmaXhfc3RhcnQodGV4dDogc3RyLCBsaW5lX3N0YXJ0\nOiBpbnQpIC0+IGludDoKICAgIHN0YXJ0ID0gbGluZV9zdGFydAogICAgd2hp\nbGUgVHJ1ZToKICAgICAgICBwcmV2X25ld2xpbmUgPSB0ZXh0LnJmaW5kKCJc\nbiIsIDAsIHN0YXJ0IC0gMSkKICAgICAgICBpZiBwcmV2X25ld2xpbmUgPT0g\nLTE6CiAgICAgICAgICAgIHJldHVybiAwCiAgICAgICAgY2FuZGlkYXRlID0g\ndGV4dFtwcmV2X25ld2xpbmUgKyAxIDogc3RhcnRdCiAgICAgICAgc3RyaXBw\nZWQgPSBjYW5kaWRhdGUuc3RyaXAoKQogICAgICAgIGlmIG5vdCBzdHJpcHBl\nZDoKICAgICAgICAgICAgcmV0dXJuIHN0YXJ0CiAgICAgICAgaWYgYW55KGNo\nIGluIHN0cmlwcGVkIGZvciBjaCBpbiAiKCk7e30iKToKICAgICAgICAgICAg\ncmV0dXJuIHN0YXJ0CiAgICAgICAgaWYgKHN0cmlwcGVkLnN0YXJ0c3dpdGgo\nIiMiKSBvciBzdHJpcHBlZC5zdGFydHN3aXRoKCIvKiIpCiAgICAgICAgICAg\nIG9yIHN0cmlwcGVkLnN0YXJ0c3dpdGgoIioiKSBvciBzdHJpcHBlZC5zdGFy\ndHN3aXRoKCIvLyIpKToKICAgICAgICAgICAgcmV0dXJuIHN0YXJ0CiAgICAg\nICAgc3RhcnQgPSBwcmV2X25ld2xpbmUgKyAxCgoKZGVmIF9jb252ZXJ0X29u\nZSh0ZXh0OiBzdHIsIG9wZW5faWR4OiBpbnQpIC0+IE9wdGlvbmFsW1R1cGxl\nW2ludCwgaW50LCBzdHIsIHN0cl1dOgogICAgaiA9IG9wZW5faWR4IC0gMQog\nICAgd2hpbGUgaiA+PSAwIGFuZCB0ZXh0W2pdLmlzc3BhY2UoKToKICAgICAg\nICBqIC09IDEKICAgIGlmIGogPCAwIG9yIG5vdCAodGV4dFtqXS5pc2FsbnVt\nKCkgb3IgdGV4dFtqXSA9PSAiXyIpOgogICAgICAgIHJldHVybiBOb25lCiAg\nICBuYW1lX2VuZCA9IGogKyAxCiAgICB3aGlsZSBqID49IDAgYW5kICh0ZXh0\nW2pdLmlzYWxudW0oKSBvciB0ZXh0W2pdID09ICJfIik6CiAgICAgICAgaiAt\nPSAxCiAgICBuYW1lX3N0YXJ0ID0gaiArIDEKICAgIGlmIGogPj0gMCBhbmQg\ndGV4dFtqXSBpbiAiLj4iOgogICAgICAgIGlmIHRleHRbal0gPT0gIj4iIGFu\nZCBqIC0gMSA+PSAwIGFuZCB0ZXh0W2ogLSAxXSA9PSAiLSI6CiAgICAgICAg\nICAgIHJldHVybiBOb25lCiAgICAgICAgaWYgdGV4dFtqXSA9PSAiLiI6CiAg\nICAgICAgICAgIHJldHVybiBOb25lCiAgICBwYXJhbXNfZW5kID0gX2ZpbmRf\nbWF0Y2hpbmdfcGFyZW4odGV4dCwgb3Blbl9pZHgpCiAgICBpZiBwYXJhbXNf\nZW5kIGlzIE5vbmU6CiAgICAgICAgcmV0dXJuIE5vbmUKICAgIHBhcmFtc19j\naHVuayA9IHRleHRbb3Blbl9pZHggKyAxIDogcGFyYW1zX2VuZF0KICAgIGFm\ndGVyX3BhcmFtcyA9IF9za2lwX3doaXRlc3BhY2VfYW5kX2NvbW1lbnRzKHRl\neHQsIHBhcmFtc19lbmQgKyAxKQogICAgYmV0d2Vlbl9oZWFkZXJfYW5kX2Js\nb2NrID0gdGV4dFtwYXJhbXNfZW5kICsgMSA6IGFmdGVyX3BhcmFtc10KICAg\nIGlmIGJldHdlZW5faGVhZGVyX2FuZF9ibG9jay5zdHJpcCgpID09ICIiOgog\nICAgICAgIGlmICJcbiIgaW4gYmV0d2Vlbl9oZWFkZXJfYW5kX2Jsb2NrOgog\nICAgICAgICAgICBiZXR3ZWVuX2hlYWRlcl9hbmRfYmxvY2sgPSAiXG4iCiAg\nICAgICAgZWxzZToKICAgICAgICAgICAgYmV0d2Vlbl9oZWFkZXJfYW5kX2Js\nb2NrID0gYmV0d2Vlbl9oZWFkZXJfYW5kX2Jsb2NrWzoxXQogICAgaWYgYWZ0\nZXJfcGFyYW1zID49IGxlbih0ZXh0KToKICAgICAgICByZXR1cm4gTm9uZQog\nICAgbmV4dF9jaGFyID0gdGV4dFthZnRlcl9wYXJhbXNdCiAgICBpZiBuZXh0\nX2NoYXIgaW4gIjtbIjoKICAgICAgICByZXR1cm4gTm9uZQogICAgaWYgbmV4\ndF9jaGFyID09ICJ7IjoKICAgICAgICByZXR1cm4gTm9uZQogICAgYnJhY2Vf\naWR4ID0gdGV4dC5maW5kKCJ7IiwgYWZ0ZXJfcGFyYW1zKQogICAgaWYgYnJh\nY2VfaWR4ID09IC0xOgogICAgICAgIHJldHVybiBOb25lCiAgICBkZWNsX2Js\nb2NrID0gdGV4dFthZnRlcl9wYXJhbXM6YnJhY2VfaWR4XQogICAgcGFyYW1f\nbmFtZXMgPSBfc3BsaXRfcGFyYW1fbmFtZXMocGFyYW1zX2NodW5rKQogICAg\naWYgbm90IHBhcmFtX25hbWVzIGFuZCBkZWNsX2Jsb2NrLnN0cmlwKCk6CiAg\nICAgICAgcmV0dXJuIE5vbmUKICAgIG1hcHBpbmcgPSBfcGFyc2VfcGFyYW1f\nYmxvY2soZGVjbF9ibG9jaywgcGFyYW1fbmFtZXMpCiAgICBpZiBtYXBwaW5n\nIGlzIE5vbmUgYW5kIHBhcmFtX25hbWVzOgogICAgICAgIHJldHVybiBOb25l\nCgogICAgbGluZV9zdGFydCA9IHRleHQucmZpbmQoIlxuIiwgMCwgbmFtZV9z\ndGFydCkgKyAxCiAgICBwcmVmaXhfc3RhcnQgPSBfY29sbGVjdF9wcmVmaXhf\nc3RhcnQodGV4dCwgbGluZV9zdGFydCkKICAgIHByZWZpeF9zZWN0aW9uID0g\ndGV4dFtwcmVmaXhfc3RhcnQ6bmFtZV9zdGFydF0KICAgIGluZGVudF9tYXRj\naCA9IHJlLm1hdGNoKHIiXHMqIiwgdGV4dFtsaW5lX3N0YXJ0Om5hbWVfc3Rh\ncnRdKQogICAgaW5kZW50ID0gaW5kZW50X21hdGNoLmdyb3VwKDApIGlmIGlu\nZGVudF9tYXRjaCBlbHNlICIiCiAgICBwcmVmaXhfdG9rZW5zID0gIiAiLmpv\naW4ocHJlZml4X3NlY3Rpb24uc3RyaXAoKS5zcGxpdCgpKQogICAgaWYgbm90\nIHByZWZpeF90b2tlbnM6CiAgICAgICAgcHJlZml4X2NvcmUgPSBpbmRlbnQg\nKyAiaW50IgogICAgZWxzZToKICAgICAgICBwcmVmaXhfY29yZSA9IGluZGVu\ndCArIHByZWZpeF90b2tlbnMKICAgIGlmIG5vdCBwcmVmaXhfY29yZS5lbmRz\nd2l0aCgoIiAiLCAiXHQiKSk6CiAgICAgICAgcHJlZml4X2NvcmUgKz0gIiAi\nCgogICAgaWYgcGFyYW1fbmFtZXM6CiAgICAgICAgdHJ5OgogICAgICAgICAg\nICBvcmRlcmVkID0gW21hcHBpbmdbbmFtZV0gZm9yIG5hbWUgaW4gcGFyYW1f\nbmFtZXNdCiAgICAgICAgZXhjZXB0IEtleUVycm9yOgogICAgICAgICAgICBy\nZXR1cm4gTm9uZQogICAgICAgIG5ld19wYXJhbV9saXN0ID0gIiwgIi5qb2lu\nKG9yZGVyZWQpCiAgICBlbHNlOgogICAgICAgIG5ld19wYXJhbV9saXN0ID0g\nInZvaWQiCgogICAgaGVhZGVyX3N0YXJ0ID0gcHJlZml4X3N0YXJ0CiAgICBk\nZWNsX2Jsb2NrX2VuZCA9IGFmdGVyX3BhcmFtcyArIGxlbihkZWNsX2Jsb2Nr\nKQogICAgdHJhaWxpbmdfd3MgPSB0ZXh0W2RlY2xfYmxvY2tfZW5kOmJyYWNl\nX2lkeF0KICAgIGZuX25hbWUgPSB0ZXh0W25hbWVfc3RhcnQ6bmFtZV9lbmRd\nCiAgICBuZXdfaGVhZGVyID0gZiJ7cHJlZml4X2NvcmV9e2ZuX25hbWV9KHtu\nZXdfcGFyYW1fbGlzdH0pIgogICAgcmVwbGFjZW1lbnQgPSBuZXdfaGVhZGVy\nICsgYmV0d2Vlbl9oZWFkZXJfYW5kX2Jsb2NrICsgdHJhaWxpbmdfd3MKICAg\nIG9yaWdpbmFsID0gdGV4dFtoZWFkZXJfc3RhcnQ6YnJhY2VfaWR4XQogICAg\ncmV0dXJuIGhlYWRlcl9zdGFydCwgYnJhY2VfaWR4LCByZXBsYWNlbWVudCwg\nb3JpZ2luYWwKCgpkZWYgY29udmVydF90ZXh0KHRleHQ6IHN0cikgLT4gVHVw\nbGVbc3RyLCBpbnRdOgogICAgaSA9IDAKICAgIHBpZWNlczogTGlzdFtzdHJd\nID0gW10KICAgIGxhc3QgPSAwCiAgICBjb252ZXJzaW9ucyA9IDAKICAgIGxl\nbmd0aCA9IGxlbih0ZXh0KQogICAgd2hpbGUgaSA8IGxlbmd0aDoKICAgICAg\nICBpZHggPSB0ZXh0LmZpbmQoIigiLCBpKQogICAgICAgIGlmIGlkeCA9PSAt\nMToKICAgICAgICAgICAgYnJlYWsKICAgICAgICByZXN1bHQgPSBfY29udmVy\ndF9vbmUodGV4dCwgaWR4KQogICAgICAgIGlmIG5vdCByZXN1bHQ6CiAgICAg\nICAgICAgIGkgPSBpZHggKyAxCiAgICAgICAgICAgIGNvbnRpbnVlCiAgICAg\nICAgc3RhcnQsIGVuZCwgcmVwbGFjZW1lbnQsIF8gPSByZXN1bHQKICAgICAg\nICBpZiBzdGFydCA8IGxhc3Q6CiAgICAgICAgICAgIGkgPSBpZHggKyAxCiAg\nICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcGllY2VzLmFwcGVuZCh0ZXh0\nW2xhc3Q6c3RhcnRdKQogICAgICAgIHBpZWNlcy5hcHBlbmQocmVwbGFjZW1l\nbnQpCiAgICAgICAgbGFzdCA9IGVuZAogICAgICAgIGNvbnZlcnNpb25zICs9\nIDEKICAgICAgICBpID0gZW5kCiAgICBwaWVjZXMuYXBwZW5kKHRleHRbbGFz\ndDpdKQogICAgcmV0dXJuICIiLmpvaW4ocGllY2VzKSwgY29udmVyc2lvbnMK\nCgpkZWYgcHJvY2Vzc19maWxlKHBhdGg6IFBhdGgsIGRyeV9ydW46IGJvb2wp\nIC0+IGludDoKICAgIHRyeToKICAgICAgICB0ZXh0ID0gcGF0aC5yZWFkX3Rl\neHQoKQogICAgZXhjZXB0IE9TRXJyb3IgYXMgZXhjOgogICAgICAgIHByaW50\nKGYiZXJyb3I6IGNhbm5vdCByZWFkIHtwYXRofToge2V4Y30iLCBmaWxlPXN5\ncy5zdGRlcnIpCiAgICAgICAgcmV0dXJuIDAKICAgIG5ld190ZXh0LCBjb3Vu\ndCA9IGNvbnZlcnRfdGV4dCh0ZXh0KQogICAgaWYgY291bnQgYW5kIG5vdCBk\ncnlfcnVuOgogICAgICAgIHBhdGgud3JpdGVfdGV4dChuZXdfdGV4dCkKICAg\nIHJldHVybiBjb3VudAoKCmRlZiBtYWluKGFyZ3Y6IE9wdGlvbmFsW1NlcXVl\nbmNlW3N0cl1dID0gTm9uZSkgLT4gaW50OgogICAgcGFyc2VyID0gYXJncGFy\nc2UuQXJndW1lbnRQYXJzZXIoZGVzY3JpcHRpb249IkNvbnZlcnQgSyZSIGZ1\nbmN0aW9uIGRlZmluaXRpb25zIHRvIEFOU0kgcHJvdG90eXBlcyIpCiAgICBw\nYXJzZXIuYWRkX2FyZ3VtZW50KCJmaWxlcyIsIG5hcmdzPSIrIiwgdHlwZT1Q\nYXRoLCBoZWxwPSJDIHNvdXJjZSBmaWxlcyB0byByZXdyaXRlIikKICAgIHBh\ncnNlci5hZGRfYXJndW1lbnQoIi0tZHJ5LXJ1biIsIGFjdGlvbj0ic3RvcmVf\ndHJ1ZSIsIGhlbHA9IlNob3cgaG93IG1hbnkgZnVuY3Rpb25zIHdvdWxkIGNo\nYW5nZSB3aXRob3V0IGVkaXRpbmcgZmlsZXMiKQogICAgYXJncyA9IHBhcnNl\nci5wYXJzZV9hcmdzKGFyZ3YpCgogICAgdG90YWwgPSAwCiAgICBmb3IgZmls\nZV9wYXRoIGluIGFyZ3MuZmlsZXM6CiAgICAgICAgY291bnQgPSBwcm9jZXNz\nX2ZpbGUoZmlsZV9wYXRoLCBhcmdzLmRyeV9ydW4pCiAgICAgICAgdG90YWwg\nKz0gY291bnQKICAgICAgICBpZiBjb3VudDoKICAgICAgICAgICAgYWN0aW9u\nID0gIndvdWxkIGNvbnZlcnQiIGlmIGFyZ3MuZHJ5X3J1biBlbHNlICJjb252\nZXJ0ZWQiCiAgICAgICAgICAgIHByaW50KGYie2ZpbGVfcGF0aH06IHthY3Rp\nb259IHtjb3VudH0gZnVuY3Rpb24ocykiKQogICAgICAgIGVsc2U6CiAgICAg\nICAgICAgIHByaW50KGYie2ZpbGVfcGF0aH06IG5vIEsmUiBkZWZpbml0aW9u\ncyBmb3VuZCIpCiAgICByZXR1cm4gMCBpZiB0b3RhbCBvciBhcmdzLmRyeV9y\ndW4gZWxzZSAwCgoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIHN5\ncy5leGl0KG1haW4oKSkK\n", "encoding": "base64", "_links": {"self": "https://api.github.com/repos/gvanrossum/abc-unix/contents/scripts/knr2ansi.py?ref=main", "git": "https://api.github.com/repos/gvanrossum/abc-unix/git/blobs/e54f21b63394f5e094bbf3445833c11bc6e42f4f", "html": "https://github.com/gvanrossum/abc-unix/blob/main/scripts/knr2ansi.py"}}